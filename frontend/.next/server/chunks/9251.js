"use strict";exports.id=9251,exports.ids=[9251],exports.modules={20365:(a,b,c)=>{c.d(b,{f:()=>e});let d=2n**256n-1n,e=({amount:a,decimals:b})=>a===d?"Maximum":Intl.NumberFormat(void 0,{maximumFractionDigits:b}).format(Number(a)/10**b)},20927:(a,b,c)=>{c.d(b,{E:()=>d,a:()=>e});let d=[{constant:!1,inputs:[{name:"_to",type:"address"},{name:"_value",type:"uint256"}],name:"transfer",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"}],e=[{constant:!1,inputs:[{name:"_to",type:"address"},{name:"_value",type:"uint256"}],name:"transfer",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"}]},42118:(a,b,c)=>{c.d(b,{g:()=>g});var d=c(9595),e=c(14415),f=c(38479);let g=async({address:a,chain:b,rpcConfig:c,privyAppId:g})=>{try{let i=(0,d.l)({chain:b,transport:(0,e.L)((0,f.a)(b,c,g))}),[j,k]=await Promise.all([i.readContract({abi:h,address:a,functionName:"symbol"}),i.readContract({abi:h,address:a,functionName:"decimals"})]);return{decimals:k,symbol:j}}catch(a){return console.log(a),null}},h=[{inputs:[],name:"decimals",outputs:[{internalType:"uint8",name:"",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"}]},76690:(a,b,c)=>{c.d(b,{D:()=>i,M:()=>g});var d=c(66150),e=c(72291);let f=({data:a})=>{let b=a=>"object"==typeof a&&null!==a?(0,d.jsx)(h,{children:Object.entries(a).map(([a,c])=>(0,d.jsxs)("li",{children:[(0,d.jsxs)("strong",{children:[a,":"]})," ",b(c)]},a))}):(0,d.jsx)("span",{children:String(a)});return(0,d.jsx)("div",{children:b(a)})},g=e.I4.div`
  margin-top: 1.5rem;
  background-color: var(--privy-color-background-2);
  border-radius: var(--privy-border-radius-md);
  padding: 12px;
  text-align: left;
  max-height: 310px;
  overflow: scroll;
  white-space: pre-wrap;
  width: 100%;
  font-size: 0.875rem;
  font-weight: 400;
  color: var(--privy-color-foreground);
  line-height: 1.5;

  // hide the scrollbars
  -ms-overflow-style: none; /* Internet Explorer 10+ */
  scrollbar-width: none; /* Firefox */

  &::-webkit-scrollbar {
    display: none; /* Safari and Chrome */
  }
`,h=e.I4.ul`
  margin-left: 12px !important;
  white-space: nowrap;

  &:first-child {
    margin-left: 0 !important;
  }

  strong {
    font-weight: 500 !important;
  }
`,i=({data:a,className:b})=>(0,d.jsx)(g,{className:b,children:(0,d.jsx)(f,{data:a})})},78411:(a,b,c)=>{c.d(b,{u:()=>i});var d=c(7719),e=c(9595),f=c(14415),g=c(38479),h=c(67331);function i({rpcConfig:a,appId:b,address:c,chain:i}){let{chains:j}=(0,h.u)(),[k,l]=(0,d.useState)(0n),[m,n]=(0,d.useState)(!1),o=(0,d.useMemo)(()=>{let c=i||j[0];if(c)return(0,e.l)({chain:i,transport:(0,f.L)((0,g.a)(c,a,b))})},[i,a,b]),p=(0,d.useCallback)(async()=>{if(!c||!o)return;n(!0);let a=await o.getBalance({address:c}).catch(console.error);return a?(l(a),n(!1),a):void 0},[o,c,l]);return(0,d.useEffect)(()=>{p().catch(console.error)},[]),{balance:k,isLoading:m,reloadBalance:p}}},99251:(a,b,c)=>{c.r(b),c.d(b,{SendTransactionScreen:()=>ac,default:()=>ac});var d=c(66150),e=c(7719),f=c(27902),g=c(7903),h=c(66613),i=c(9595),j=c(14415),k=c(29502),l=c(21512),m=c(97057),n=c(87291),o=c(7595),p=c(50579),q=c(17883),r=c(67331),s=c(2808),t=c(60606),u=c(78411),v=c(42118),w=c(20365),x=c(78624),y=c(69712),z=c(38479),A=c(3029),B=c(72291),C=c(55164),D=c(76690),E=c(52748),F=c(65389),G=c(94550),H=c(49758),I=c(20927),J=c(59962);c(19078),c(43132),c(11765),c(30443),c(8752);let K=[{constant:!0,inputs:[{name:"_owner",type:"address"}],name:"balanceOf",outputs:[{name:"balance",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"}],L=B.I4.div`
  display: flex;
  flex-direction: column;
  min-height: 72px;
`;var M=({onBack:a,details:b})=>(0,d.jsxs)(L,{children:[(0,d.jsx)(C.M,{backFn:a}),(0,d.jsx)(D.D,{data:b}),(0,d.jsx)(C.B,{})]});let N=({txn:a,receipt:b,transactionInfo:c,onClose:e,tokenPrice:g,tokenSymbol:h,receiptHeader:i,receiptDescription:j})=>(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(C.M,{onClose:e}),(0,d.jsx)(G.S,{title:i??"Transaction complete!",description:j??"You're all set."}),(0,d.jsx)(H.T,{tokenPrice:g,from:b.from,to:b.to,gas:(({gasUsed:a,effectiveGasPrice:b})=>{if(a&&b)try{return(0,f.nj)(a*b)}catch(a){return}})(b),txn:a,transactionInfo:c,tokenSymbol:h}),(0,d.jsx)(y.Y,{}),(0,d.jsx)(O,{loading:!1,onClick:e,children:"All Done"}),(0,d.jsx)(F.R,{}),(0,d.jsx)(C.B,{})]}),O=(0,B.I4)(C.P)`
  && {
    margin-top: 24px;
  }
  transition:
    color 350ms ease,
    background-color 350ms ease;
`,P=[{constant:!1,inputs:[{name:"_salt",type:"bytes32"},{name:"_initializer",type:"bytes"}],name:"deployAccount",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"}],Q=[{name:"from",type:"address"},{name:"param2",type:"address"},{name:"param3",type:"bytes"},{name:"param4",type:"tuple",components:[]},{type:"tuple",components:[{name:"param5",type:"address"},{name:"param6",type:"uint256"},{name:"param7",type:"uint256"},{name:"encodedInitData",type:"bytes"}]}],R=[{constant:!1,inputs:[{name:"spender",type:"address"},{name:"value",type:"uint256"}],name:"approve",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"}],S=[{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"mint",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"mint",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"}],name:"mint",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"}],name:"mint",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"uint256",name:"quantity",type:"uint256"},{internalType:"bytes",name:"data",type:"bytes"}],name:"mint",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"uint256",name:"quantity",type:"uint256"},{internalType:"bytes",name:"data",type:"bytes"}],name:"mint",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"payable",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256[]",name:"tokenIds",type:"uint256[]"},{internalType:"uint256[]",name:"quantities",type:"uint256[]"},{internalType:"bytes",name:"data",type:"bytes"}],name:"mintBatch",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256[]",name:"tokenIds",type:"uint256[]"},{internalType:"uint256[]",name:"quantities",type:"uint256[]"},{internalType:"bytes",name:"data",type:"bytes"}],name:"mintBatch",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"payable",type:"function"},{inputs:[{internalType:"uint256",name:"quantity",type:"uint256"}],name:"mint",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"quantity",type:"uint256"}],name:"mint",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"payable",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"}],name:"safeMint",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"}],name:"safeMint",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"string",name:"uri",type:"string"}],name:"safeMint",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"string",name:"uri",type:"string"}],name:"safeMint",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"safeMint",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"safeMint",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"string",name:"uri",type:"string"}],name:"safeMint",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"string",name:"uri",type:"string"}],name:"safeMint",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"batchMint",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"batchMint",outputs:[],stateMutability:"payable",type:"function"}],T=[{constant:!1,inputs:[{name:"_from",type:"address"},{name:"_to",type:"address"},{name:"_tokenId",type:"uint256"}],name:"safeTransferFrom",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"}],U=[{constant:!1,inputs:[{name:"_operator",type:"address"},{name:"_approved",type:"bool"}],name:"setApprovalForAll",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"}],V=[{constant:!1,inputs:[{name:"_from",type:"address"},{name:"_to",type:"address"},{name:"_tokenId",type:"uint256"}],name:"transferFrom",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"}],W=[{constant:!1,inputs:[{name:"_from",type:"address"},{name:"_to",type:"address"},{name:"_tokenIds",type:"uint256[]"},{name:"_amounts",type:"uint256[]"},{name:"_data",type:"bytes"}],name:"safeBatchTransferFrom",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"}],X=[{constant:!1,inputs:[{name:"_from",type:"address"},{name:"_to",type:"address"},{name:"_tokenId",type:"uint256"},{name:"_amount",type:"uint256"},{name:"_data",type:"bytes"}],name:"safeTransferFrom",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"}],Y=(a,b)=>{let c=Z(R,a);if(c)return{action:"approve",functionName:"approve",isErc20Ish:!0,isNFTIsh:!1,spender:c.args[0],amount:c.args[1]};let d=Z(I.E,a);if(d)return{action:"transfer",functionName:"transfer",isErc20Ish:!0,isNFTIsh:!1,transferTo:d.args[0],amount:d.args[1]};if(!b)return{action:"transaction",functionName:"",isErc20Ish:!1,isNFTIsh:!1};let e=Z(P,a);if(e&&"string"==typeof e.args[1]){let a=$(e.args[1]);if(a&&a[4].encodedInitData)return Y(a[4].encodedInitData,b)}let f=Z(U,a);if(f)return{action:"approve",functionName:"setApprovalForAll",isNFTIsh:!0,isErc20Ish:!1,operator:f.args[0],approved:f.args[1]};let g=Z(V,a);if(g)return{action:"transfer",functionName:"transferFrom",isNFTIsh:!0,isErc20Ish:!1,transferFrom:g.args[0],transferTo:g.args[1],tokenId:g.args[2]};let h=Z(T,a);if(h)return{action:"transfer",functionName:"safeTransferFrom",isNFTIsh:!0,isErc20Ish:!1,transferFrom:h.args[0],transferTo:h.args[1],tokenId:h.args[2]};let i=Z(X,a);if(i)return{action:"transfer",functionName:"safeTransferFrom",isNFTIsh:!0,isErc20Ish:!1,transferFrom:i.args[0],transferTo:i.args[1],tokenId:i.args[2],amount:i.args[3]};let j=Z(W,a);if(j)return{action:"batch transfer",functionName:"safeBatchTransferFrom",isNFTIsh:!0,isErc20Ish:!1,transferFrom:j.args[0],transferTo:j.args[1],tokenIds:j.args[2],amounts:j.args[3]};let k=Z(S,a);return k?{action:"mint",functionName:k.functionName,isNFTIsh:!0,isErc20Ish:!1,args:k.args}:{action:"transaction",isErc20Ish:!1,isNFTIsh:!1}},Z=(a,b)=>{try{let c=(0,g.J)({abi:a,data:b});return{functionName:c.functionName,args:c.args||[]}}catch(a){return null}},$=a=>{try{if("string"==typeof a)return(0,h.n)(Q,`0x${a.slice(10)}`)}catch(a){return null}},_=a=>`${parseFloat(a).toFixed(2)}`,aa=new q.P(new q.j("There was an issue preparing your transaction",l.Z9.E32603_DEFAULT_INTERNAL_ERROR.eipCode)),ab=(a,b)=>a?.sendTransaction?"transactionRequest"in a.sendTransaction?a.sendTransaction.transactionRequest:a.sendTransaction.transactionRequests[b]:void 0,ac={component:()=>{let{data:a,onUserCloseViaDialogOrKeybindRef:b,setModalData:c,navigate:f}=(0,s.a)(),{client:g,rpcConfig:h,chains:B,closePrivyModal:C,walletProxy:D,showFiatPrices:F}=(0,r.u)(),{user:G}=(0,s.u)(),H=(0,p.u)(),[I,L]=(0,e.useState)(0),[O,P]=(0,e.useState)(0),[Q,R]=(0,e.useState)(ab(a,I)),[S,T]=(0,e.useState)(null),[U,V]=(0,e.useState)(),[W,X]=(0,e.useState)(!1),[Z,$]=(0,e.useState)(null),[ac,ad]=(0,e.useState)(null),[ae,af]=(0,e.useState)(null),[ag,ah]=(0,e.useState)(void 0),[ai,aj]=(0,e.useState)(void 0),[ak,al]=(0,e.useState)(!1),[am,an]=(0,e.useState)(!1),[ao,ap]=(0,e.useState)([]),[aq,ar]=(0,e.useState)([]),[as,at]=(0,e.useState)("uninitiated"),[au,av]=(0,e.useState)(void 0);if(!Q||!a?.sendTransaction||!a?.sendTransaction)return(0,d.jsx)(A.ErrorScreenView,{error:Error("Invalid transaction request"),allowlistConfig:H.allowlistConfig,onRetry:()=>{a?.sendTransaction?.onFailure(aa),C({shouldCallAuthOnSuccess:!1})}});let{transactingWalletAddress:aw}=a.sendTransaction,ax=(0,e.useMemo)(()=>B.find(a=>Number(a.id)===Number(Q.chainId)),[Q.chainId]),ay=ax?.nativeCurrency.symbol??"ETH",az=(0,e.useMemo)(()=>Y(Q.data,!!H.embeddedWallets.extendedCalldataDecoding),[Q.data]),{action:aA,isErc20Ish:aB,isNFTIsh:aC,functionName:aD}=az,{toAddress:aE,tokenAddress:aF}=(0,e.useMemo)(()=>({toAddress:az.isErc20Ish?az.transferTo:Q.to??void 0,tokenAddress:az.isErc20Ish?Q.to:void 0}),[az]);(0,e.useEffect)(()=>{Q.to&&ax&&aB&&(0,v.g)({address:Q.to,chain:ax,rpcConfig:H.rpcConfig,privyAppId:H.id}).then(T).catch(console.error)},[Q.to,ax]);let{tokenPrice:aG,isTokenPriceLoading:aH}=(0,t.u)(Q.chainId),{balance:aI}=(0,u.u)({rpcConfig:H.rpcConfig,appId:H.id,address:aw,chain:ax}),aJ=function({rpcConfig:a,appId:b,address:c,chain:d,tokenInfo:f}){let{chains:g}=(0,r.u)(),[h,k]=(0,e.useState)(null),[l,o]=(0,e.useState)(!1),p=(0,e.useMemo)(()=>{let c=d||g[0];if(c)return(0,i.l)({chain:d,transport:(0,j.L)((0,m.K9)(c,a,b))})},[d,a,b]),q=(0,e.useCallback)(async()=>{if(c&&p&&f.address)try{return o(!0),await p.readContract({address:f.address,abi:K,functionName:"balanceOf",args:[c]})}catch(a){console.error(a)}finally{o(!1)}},[p,c,f?.address,d]);return(0,e.useEffect)(()=>{q().then(a=>null!=a&&k(a))},[q]),{balance:h,isLoading:l&&null==h,formattedBalance:(0,n.NJ)({amount:h??BigInt(0),decimals:f.decimals})}}({rpcConfig:H.rpcConfig,appId:H.id,address:aw,tokenInfo:{address:aF||"",decimals:S?.decimals??18},chain:ax}),aK=(0,e.useMemo)(()=>(0,z.g)(Number(Q.chainId),B,h,{appId:H.id}),[Q.chainId,h]),aL=((a,b,c,d)=>{let[f,g]=(0,e.useState)(null),{walletProxy:h}=(0,r.u)();return(0,e.useEffect)(()=>{f&&g(null),(async()=>{if(!h||!b)return null;let e=[],f=!0,g=await (0,J.p)(a,c,b,d).catch(b=>(b.message&&b.message.includes("Insufficient balance for transaction")||b.message&&b.message.includes("Insufficient funds for gas * price + value")||b.details&&b.details.includes("insufficient funds")?f=!1:e.push(b),a));return{tx:g,totalGasEstimate:g.gas,hasFunds:f,errors:e}})().then(g)},[a]),f})(Q,aw,aK,a?.sendTransaction?.prepareTransactionRequest);(0,e.useEffect)(()=>{R(ab(a,I))},[I]),(0,e.useEffect)(()=>{a.sendTransaction?.getIsSponsored?a.sendTransaction.getIsSponsored().then(V).catch(console.error):V(!1)},[a.sendTransaction.getIsSponsored]);let aM=()=>{if(!W)return Z?a?.sendTransaction?.onSuccess({hash:Z}):ae||aL?.errors[0]?a?.sendTransaction?.onFailure(ae??aL?.errors[0]??aa):a?.sendTransaction?.onFailure(new q.P(new q.j("The user rejected the request",l.Z9.E4001_USER_REJECTED_REQUEST.eipCode))),C({shouldCallAuthOnSuccess:!1})};b.current=aM;let aN=!!(a.funding&&a.funding.supportedOptions.length>0),aO=(0,x.g)(BigInt(aL?.totalGasEstimate??0n),ay),aP=F&&aG?(0,x.a)(BigInt(aL?.totalGasEstimate??0n),aG):void 0,aQ=(0,x.g)(aI??0n,ay,void 0,!0),aR=F&&aG?(0,x.a)(aI??0n,aG):void 0,aS=S&&!aJ.isLoading&&aB&&"approve"!==aA?`${aJ.formattedBalance} ${S.symbol}`:void 0,aT=a.sendTransaction?.uiOptions?.transactionInfo?.title;aT||(aT="approve"===aA?aB?"Confirm address":"Confirm action":`Approve ${aA}`);let aU=(0,e.useMemo)(()=>{if(a.sendTransaction?.uiOptions?.description)return a.sendTransaction?.uiOptions?.description;if("approve"===aA&&"setApprovalForAll"===aD&&az.approved){let a=(0,d.jsx)(o.A,{address:az.operator||"",url:ax?.blockExplorers?.default?.url});return(0,d.jsxs)(d.Fragment,{children:[H.name," would like your permission for ",a," to transfer tokens on your behalf."]})}if("approve"===aA&&"setApprovalForAll"===aD&&!az.approved){let a=(0,d.jsx)(o.A,{address:az.operator||"",url:ax?.blockExplorers?.default?.url});return(0,d.jsxs)(d.Fragment,{children:[H.name," would like your permission to revoke permissions of ",a," from transferring tokens on your behalf."]})}return aB&&"approve"===aA||aB&&"approve"===aA?`${H.name} would like your permission for ${(0,y.D)(az.spender)} to spend tokens on your behalf.`:`${H.name} wants your permission to approve the following transaction.`},[H.name,aB,az,a.sendTransaction?.uiOptions.description,aD]),aV=a.sendTransaction?.uiOptions?.transactionInfo?.contractInfo?.imgUrl?(0,d.jsx)("img",{src:a.sendTransaction.uiOptions.transactionInfo.contractInfo.imgUrl,alt:a.sendTransaction.uiOptions.transactionInfo.contractInfo.imgAltText}):null,aW=!(!aL||aL.errors[0]||aL.hasFunds||!1!==U),aX=aW&&aN,aY=aX?"Add funds":a.sendTransaction?.uiOptions?.buttonText||(I<O?"Continue":"Approve");if((0,e.useEffect)(()=>{a.sendTransaction?.scanTransaction&&H.embeddedWallets.transactionScanning.enabled&&"uninitiated"===as&&(at("in progress"),a.sendTransaction.scanTransaction().then(a=>{(a=>{if(!a)throw Error("Transaction scan failed");if("Success"===a.validation.status&&("Benign"===a.validation.result_type?aj("safe"):"Warning"===a.validation.result_type?aj("warn"):"Malicious"===a.validation.result_type&&(aj("error"),an(!0))),"Success"!==a.simulation.status)throw Error("Simulation failed");{ah(a.simulation.params);let{assetsIn:b,assetsOut:c}=function(a,b){let c=[],d=new Map;if(a){for(let b of a)if(b.in[0]){let a;a="ERC721"===b.asset.type||"approve_for_all"===b.in[0].value?{id:`nft:${b.asset.name}`,nftName:b.asset.name,nftCount:b.in.length}:{id:`token:${b.asset.type}:${b.asset.symbol}:${b.asset.name}`,iconUrl:b.asset.logo_url,value:b.in[0].value,symbol:b.asset.symbol,usdValue:b.in[0].usd_price?_(b.in[0].usd_price):void 0,decimals:b.asset.decimals},c.push(a)}else if(b.out[0]?.value){let a;a="ERC721"===b.asset.type||"approve_for_all"===b.out[0].value?{id:`nft:${b.asset.name}`,nftName:b.asset.name}:{id:`token:${b.asset.type}:${b.asset.symbol}:${b.asset.name}`,iconUrl:b.asset.logo_url,value:b.out[0].value,symbol:b.asset.symbol,usdValue:b.out[0].usd_price?_(b.out[0].usd_price):void 0,decimals:b.asset.decimals},d.has(a.id)||d.set(a.id,a)}}for(let a of b)for(let b of Object.keys(a.spenders)){let c;c="ERC721"===a.asset.type||"approve_for_all"===a.spenders[b]?.value?{id:`nft:${a.asset.name}`,nftName:a.asset.name}:{id:`token:${a.asset.type}:${a.asset.symbol}:${a.asset.name}`,iconUrl:a.asset.logo_url,value:a.spenders[b]?.value,symbol:a.asset.symbol,usdValue:a.spenders[b]?.usd_price?_(a.spenders[b]?.usd_price):void 0,decimals:a.asset.decimals},d.has(c.id)||d.set(c.id,c)}return{assetsIn:c,assetsOut:Array.from(d.values())}}(a.simulation.assets_diffs,a.simulation.exposures);if(0===c.length&&0===b.length)throw Error("No tokens found");ap(c),ar(b)}})(a),at("completed")}).catch(()=>at("failed")))},[!!a.sendTransaction?.scanTransaction]),(0,e.useEffect)(()=>{a.sendTransaction?.scanTransaction&&"failed"!==as||((b,c,d)=>{if(P(a?.sendTransaction?"transactionRequest"in a.sendTransaction?0:a.sendTransaction.transactionRequests.length-1:0),c.isErc20Ish&&c.amount&&d){let a=(0,w.f)({amount:c.amount,decimals:d.decimals});av(a),ap([{value:a,symbol:d?.symbol,decimals:d?.decimals}])}else if(b.value){let a=BigInt(b.value),c=aG?(0,x.a)(a,aG):void 0;ap(F&&c?[{value:c}]:[{value:(0,x.p)(a),symbol:ay,decimals:18,usdValue:c}])}else ap(F?[{value:"$0"}]:[{value:"0",symbol:ay,decimals:18}])})(aL?.tx??Q,az,S)},[Q,aL?.tx,az,S,as]),ac)return(0,d.jsx)(N,{txn:aL?.tx??Q,onClose:aM,receipt:ac,transactionInfo:a.sendTransaction?.uiOptions.transactionInfo,tokenPrice:aG,tokenSymbol:ay,receiptHeader:a.sendTransaction?.uiOptions.successHeader,receiptDescription:a.sendTransaction?.uiOptions.successDescription});if(ae)return(0,d.jsx)(E.T,{transactionError:ae,transactionHash:Z??void 0,chainType:"ethereum",chainId:aL?.tx.chainId??Q.chainId,onClose:aM,onRetry:({resetNonce:a})=>{af(null);let b={...aL?.tx??Q};a&&(b.nonce=void 0),R(b)}});let aZ=0!==O&&"number"==typeof I&&0!==I?()=>{L(I-1)}:void 0;return ak&&ag?(0,d.jsx)(M,{details:ag,onBack:()=>al(!1)}):(0,d.jsx)(E.S,{transactionIndex:I,onBack:aZ,maxIndex:O,disabled:aW&&!aN||am,isSubmitting:W,submitError:ae,isPreparing:!aL,isTokenPriceLoading:aH,isTokenContractInfoLoading:!aC&&!S,prepareError:aL?.errors[0],symbol:S?.symbol,chain:ax,img:aV,title:aT,subtitle:aU,txValue:Q.value,fee:aP??aO,isSponsored:U,from:aw??"",to:aE,tokenAddress:aF??void 0,network:H.chains.find(a=>a.id===Q.chainId)?.name??"",transactionDetails:{...az,formattedAmount:au},cta:aY,missingFunds:aW,action:aA,balance:aS??aR??aQ,onClose:aM,onClick:aX?async()=>{if(!aw)return;if(!aN)throw Error("Funding wallet is not enabled");let b="FundingMethodSelectionScreen";c({...a,funding:{...a.funding,methodScreen:b,chainType:"ethereum",amount:(0,k.c)(BigInt(aL?.tx.value??0)+BigInt(aL?.totalGasEstimate?.toString()??0)),chain:ax},solanaFundingData:a?.solanaFundingData}),f(b)}:async()=>{if(I<O)L(I+1);else{X(!0);try{let b=await g.getAccessToken();if(W||!b||!D||!G)return;let c=await a.sendTransaction.onConfirm({transactionRequest:aL?.tx??Q});if($(c),a.sendTransaction?.signOnly)return await new Promise(a=>setTimeout(a,p.q)),a?.sendTransaction?.onSuccess({hash:c}),C({shouldCallAuthOnSuccess:!1});let d=await aK.waitForTransactionReceipt({hash:c});if("reverted"===d.status)throw Error("Transaction failed");ad(d)}catch(a){console.warn({transaction:aL?.tx??Q,error:a}),af(a)}finally{X(!1)}}},validation:ai,hasScanDetails:!!ag,setIsScanDetailsOpen:al,preventMaliciousTransaction:am,setPreventMaliciousTransaction:an,tokensSent:ao,tokensReceived:aq,isScanning:"in progress"===as,isCancellable:a.sendTransaction?.uiOptions?.isCancellable??!1,functionName:aD})}}}};