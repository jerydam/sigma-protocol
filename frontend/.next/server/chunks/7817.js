"use strict";exports.id=7817,exports.ids=[7817],exports.modules={97817:(a,b,c)=>{c.d(b,{toFormData:()=>o});var d=c(69360);c(37067),c(44708),c(38522),c(57075),c(4573),c(57975),c(74354),c(73136),c(77030),c(73024),c(76760);var e=Object.defineProperty,f=(a,b)=>e(a,"name",{value:b,configurable:!0});let g=0,h={START_BOUNDARY:g++,HEADER_FIELD_START:g++,HEADER_FIELD:g++,HEADER_VALUE_START:g++,HEADER_VALUE:g++,HEADER_VALUE_ALMOST_DONE:g++,HEADERS_ALMOST_DONE:g++,PART_DATA_START:g++,PART_DATA:g++,END:g++},i=1,j=2,k=f(a=>32|a,"lower"),l=f(()=>{},"noop"),m=class{constructor(a){this.index=0,this.flags=0,this.onHeaderEnd=l,this.onHeaderField=l,this.onHeadersEnd=l,this.onHeaderValue=l,this.onPartBegin=l,this.onPartData=l,this.onPartEnd=l,this.boundaryChars={};const b=new Uint8Array((a=`\r
--`+a).length);for(let c=0;c<a.length;c++)b[c]=a.charCodeAt(c),this.boundaryChars[b[c]]=!0;this.boundary=b,this.lookbehind=new Uint8Array(this.boundary.length+8),this.state=h.START_BOUNDARY}write(a){let b,c,d=0,e=a.length,g=this.index,{lookbehind:l,boundary:m,boundaryChars:n,index:o,state:p,flags:q}=this,r=this.boundary.length,s=r-1,t=a.length,u=f(a=>{this[a+"Mark"]=d},"mark"),v=f(a=>{delete this[a+"Mark"]},"clear"),w=f((a,b,c,d)=>{(void 0===b||b!==c)&&this[a](d&&d.subarray(b,c))},"callback"),x=f((b,c)=>{let e=b+"Mark";e in this&&(c?(w(b,this[e],d,a),delete this[e]):(w(b,this[e],a.length,a),this[e]=0))},"dataCallback");for(d=0;d<e;d++)switch(b=a[d],p){case h.START_BOUNDARY:if(o===m.length-2){if(45===b)q|=j;else if(13!==b)return;o++;break}if(o-1==m.length-2){if(q&j&&45===b)p=h.END,q=0;else{if(q&j||10!==b)return;o=0,w("onPartBegin"),p=h.HEADER_FIELD_START}break}b!==m[o+2]&&(o=-2),b===m[o+2]&&o++;break;case h.HEADER_FIELD_START:p=h.HEADER_FIELD,u("onHeaderField"),o=0;case h.HEADER_FIELD:if(13===b){v("onHeaderField"),p=h.HEADERS_ALMOST_DONE;break}if(o++,45===b)break;if(58===b){if(1===o)return;x("onHeaderField",!0),p=h.HEADER_VALUE_START;break}if((c=k(b))<97||c>122)return;break;case h.HEADER_VALUE_START:if(32===b)break;u("onHeaderValue"),p=h.HEADER_VALUE;case h.HEADER_VALUE:13===b&&(x("onHeaderValue",!0),w("onHeaderEnd"),p=h.HEADER_VALUE_ALMOST_DONE);break;case h.HEADER_VALUE_ALMOST_DONE:if(10!==b)return;p=h.HEADER_FIELD_START;break;case h.HEADERS_ALMOST_DONE:if(10!==b)return;w("onHeadersEnd"),p=h.PART_DATA_START;break;case h.PART_DATA_START:p=h.PART_DATA,u("onPartData");case h.PART_DATA:if(g=o,0===o){for(d+=s;d<t&&!(a[d]in n);)d+=r;d-=s,b=a[d]}if(o<m.length)m[o]===b?(0===o&&x("onPartData",!0),o++):o=0;else if(o===m.length)o++,13===b?q|=i:45===b?q|=j:o=0;else if(o-1===m.length)if(q&i){if(o=0,10===b){q&=~i,w("onPartEnd"),w("onPartBegin"),p=h.HEADER_FIELD_START;break}}else q&j&&45===b?(w("onPartEnd"),p=h.END,q=0):o=0;o>0?l[o-1]=b:g>0&&(w("onPartData",0,g,new Uint8Array(l.buffer,l.byteOffset,l.byteLength)),g=0,u("onPartData"),d--);break;case h.END:break;default:throw Error(`Unexpected state entered: ${p}`)}x("onHeaderField"),x("onHeaderValue"),x("onPartData"),this.index=o,this.state=p,this.flags=q}end(){if(this.state===h.HEADER_FIELD_START&&0===this.index||this.state===h.PART_DATA&&this.index===this.boundary.length)this.onPartEnd();else if(this.state!==h.END)throw Error("MultipartParser.end(): stream ended unexpectedly")}};function n(a){let b=a.match(/\bfilename=("(.*?)"|([^()<>@,;:\\"/[\]?={}\s\t]+))($|;\s)/i);if(!b)return;let c=b[2]||b[3]||"",d=c.slice(c.lastIndexOf("\\")+1);return(d=d.replace(/%22/g,'"')).replace(/&#(\d{4});/g,(a,b)=>String.fromCharCode(b))}async function o(a,b){let c,e,g,h,i,j;if(!/multipart/i.test(b))throw TypeError("Failed to fetch");let k=b.match(/boundary=(?:"([^"]+)"|([^;]+))/i);if(!k)throw TypeError("no or bad content-type header, no multipart boundary");let l=new m(k[1]||k[2]),o=[],p=new d.fS,q=f(a=>{g+=u.decode(a,{stream:!0})},"onPartData"),r=f(a=>{o.push(a)},"appendToFile"),s=f(()=>{let a=new d.ZH(o,j,{type:i});p.append(h,a)},"appendFileToFormData"),t=f(()=>{p.append(h,g)},"appendEntryToFormData"),u=new TextDecoder("utf-8");for await(let b of(u.decode(),l.onPartBegin=function(){l.onPartData=q,l.onPartEnd=t,c="",e="",g="",h="",i="",j=null,o.length=0},l.onHeaderField=function(a){c+=u.decode(a,{stream:!0})},l.onHeaderValue=function(a){e+=u.decode(a,{stream:!0})},l.onHeaderEnd=function(){if(e+=u.decode(),"content-disposition"===(c=c.toLowerCase())){let a=e.match(/\bname=("([^"]*)"|([^()<>@,;:\\"/[\]?={}\s\t]+))/i);a&&(h=a[2]||a[3]||""),(j=n(e))&&(l.onPartData=r,l.onPartEnd=s)}else"content-type"===c&&(i=e);e="",c=""},a))l.write(b);return l.end(),p}f(m,"MultipartParser"),f(n,"_fileName"),f(o,"toFormData")}};