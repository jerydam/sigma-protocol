"use strict";exports.id=1019,exports.ids=[1019],exports.modules={91019:(a,b,c)=>{c.r(b),c.d(b,{EmbeddedWalletPasswordUpdateScreen:()=>k,default:()=>k});var d=c(66150),e=c(7719),f=c(2808),g=c(50579),h=c(67331),i=c(8327),j=c(84484);c(19078),c(11765),c(43132),c(45396),c(67507),c(62288);let k={component:()=>{let[a,b]=(0,e.useState)(null),[c,k]=(0,e.useState)(!1),[l,m]=(0,e.useState)(null),[n,o]=(0,e.useState)(""),{authenticated:p,user:q}=(0,f.u)(),{client:r,walletProxy:s,refreshSessionAndUser:t,closePrivyModal:u,createAnalyticsEvent:v}=(0,h.u)(),{navigate:w,data:x,onUserCloseViaDialogOrKeybindRef:y}=(0,f.a)(),z=(0,g.u)(),{onSuccess:A,onFailure:B}=x.setWalletPassword,C=(0,f.g)(q),D="user-passcode"===a?.recoveryMethod,E="user-passcode"===C?.recoveryMethod;(0,e.useEffect)(()=>{p||(w("LandingScreen"),B(new h.o("User must be authenticated before setting a password on a Privy wallet")))},[p]);let F=()=>(l?B(l):D?A(a):B(new h.m("Exited before password was added to wallet")),void u({shouldCallAuthOnSuccess:!1}));return y.current=F,(0,d.jsx)(j.S,{appName:z?.name||"privy",config:{initiatedBy:"user",onCancel:F},error:l?"An error has occurred, please try again.":void 0,buttonLoading:c,buttonHideAnimations:!1,password:n,isResettingPassword:E,onPasswordGenerate:()=>o((0,j.g)()),onPasswordChange:o,onSubmit:async()=>{D?(A(a),u({shouldCallAuthOnSuccess:!1})):(k(!0),m(null),await (async()=>{let a=await r.getAccessToken();if(a&&q&&C?.address&&n&&s)try{v({eventName:"embedded_wallet_set_recovery_started",payload:{walletAddress:C.address,existingRecoveryMethod:C.recoveryMethod,targetRecoveryMethod:"user-passcode",isResettingPassword:E}});let{entropyId:c,entropyIdVerifier:d}=(0,i.g)(q);if(!(await s.setRecovery({accessToken:a,entropyId:c,entropyIdVerifier:d,recoveryPassword:n,recoveryMethod:"user-passcode"})).entropyId)return m(new h.m("Error setting password on privy wallet")),void v({eventName:"embedded_wallet_set_recovery_failed",payload:{walletAddress:C.address,existingRecoveryMethod:C.recoveryMethod,targetRecoveryMethod:"user-passcode",isResettingPassword:E,reason:"error setting password"}});let e=await t(),g=(0,f.g)(e);if(!g)return m(new h.m("Error setting password on privy wallet")),void v({eventName:"embedded_wallet_set_recovery_failed",payload:{walletAddress:C.address,existingRecoveryMethod:C.recoveryMethod,targetRecoveryMethod:"user-passcode",isResettingPassword:E,reason:"wallet disconnected"}});b(g),v({eventName:"embedded_wallet_set_recovery_completed",payload:{walletAddress:C.address,existingRecoveryMethod:C.recoveryMethod,targetRecoveryMethod:"user-passcode",isResettingPassword:E}})}catch(a){console.warn(a),m(a instanceof Error?a:Error("Error setting password on privy wallet")),v({eventName:"embedded_wallet_set_password_failed",payload:{walletAddress:C.address,reason:a}})}})(),k(!1))},onClose:F})}}}};