"use strict";exports.id=4538,exports.ids=[4538],exports.modules={54538:(a,b,c)=>{c.r(b),c.d(b,{EmbeddedWalletPasswordCreateScreen:()=>k,default:()=>k});var d=c(66150),e=c(7719),f=c(50579),g=c(59962),h=c(67331),i=c(2808),j=c(84484);c(19078),c(43132),c(11765),c(30443),c(8752),c(45396),c(67507),c(62288);let k={component:()=>{let{navigate:a,data:b,onUserCloseViaDialogOrKeybindRef:c}=(0,i.a)(),k=(0,f.u)(),[l,m]=(0,e.useState)(""),[n,o]=(0,e.useState)(!1),[p,q]=(0,e.useState)(),[r,s]=(0,e.useState)(null),{create:t}=(0,g.v)(),{authenticated:u,user:v}=(0,i.u)(),{closePrivyModal:w,isNewUserThisSession:x,initializeWalletProxy:y}=(0,h.u)(),{onSuccess:z,onFailure:A,callAuthOnSuccessOnClose:B,shouldCreateEth:C,shouldCreateSol:D}=b.createWallet,[E,F]=(0,e.useState)(null),G=new g.R(async()=>{try{let b;if(C&&D)b=await t({recoveryMethod:"user-passcode",recoveryPassword:p,chainType:"ethereum",walletIndex:0,latestUser:v}),b=await t({chainType:"solana",walletIndex:0,latestUser:b.user});else if(D)b=await t({recoveryMethod:"user-passcode",recoveryPassword:p,chainType:"solana",walletIndex:0,latestUser:v});else{if(!C)throw Error("Invalid args to create wallet");b=await t({recoveryMethod:"user-passcode",recoveryPassword:p,chainType:"ethereum",walletIndex:0,latestUser:v})}F(b),x?a("EmbeddedWalletCreatedScreen"):(z(b),w({shouldCallAuthOnSuccess:B}))}catch(a){m(a.message)}});return(0,e.useEffect)(()=>{r||y(3e4).then(a=>s(a))},[r]),(0,e.useEffect)(()=>{if(!u||!v)return a("LandingScreen"),void A(Error("User must be authenticated before creating a Privy wallet"))},[u]),c.current=()=>null,(0,d.jsx)(j.S,{config:{initiatedBy:"automatic"},appName:k?.name||"privy",loading:!r,buttonLoading:n,buttonHideAnimations:!E&&n,isResettingPassword:!1,error:l,password:p||"",onClose:()=>{E&&"user-passcode"!==E.account.recoveryMethod?(A(new h.m("User created a wallet but failed to set a password for it")),w({shouldCallAuthOnSuccess:!1})):E?(z(E),w({shouldCallAuthOnSuccess:B})):(A(new h.m("User wallet creation failed")),w({shouldCallAuthOnSuccess:!1}))},onPasswordChange:q,onPasswordGenerate:()=>q((0,j.g)()),onSubmit:async()=>(o(!0),G.execute().then(()=>new Promise(a=>setTimeout(a,250))).finally(()=>o(!1)))})}}}};