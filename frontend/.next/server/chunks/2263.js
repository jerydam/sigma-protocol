"use strict";exports.id=2263,exports.ids=[2263],exports.modules={52263:(a,b,c)=>{c.r(b),c.d(b,{MfaVerifyFlowScreen:()=>j,default:()=>j});var d=c(66150),e=c(7719),f=c(50579),g=c(2808),h=c(59962),i=c(59089);c(19078),c(43132),c(11765),c(30443),c(8752);let j=({onClose:a})=>{let{user:b}=(0,g.u)(),c=(0,f.u)(),j=(0,e.useMemo)(()=>b?.mfaMethods.filter(a=>"passkey"!==a||!c.globalDisablePasskeys)??[],[b?.mfaMethods,c.globalDisablePasskeys]),[k,l]=(0,e.useState)(j[0]??null),{init:m,cancel:n,submit:o}=(0,h.u)(),[p,q]=(0,e.useState)(!1),[r,s]=(0,e.useState)(null),[t,u]=(0,e.useState)();(0,e.useEffect)(()=>{l(j[0]??null)},[j]);let v=(0,e.useRef)(!1);async function w(b){u(void 0);try{if(!b||!k)return;await o(k,b),q(!0),u(void 0),a()}catch(a){throw(0,i.t)(a).error}}async function x(b){if("passkey"!==b)try{l(b),await m(b)}catch(a){console.error(a)}else try{l(b);let c=await m(b);if(!c)throw Error("something went wrong");s(c),await o(b,c),q(!0),u(void 0),a()}catch(a){u((0,i.t)(a))}}(0,e.useEffect)(()=>{!v.current&&k&&(v.current=!0,x(k).finally(()=>{v.current=!1}))},[]);let y=()=>{l(null),u(void 0),n(),a()};return b?"passkey"===k?(0,d.jsx)(i.V,{account:b.linkedAccounts.filter(a=>"passkey"===a.type&&a.enrolledInMfa).sort((a,b)=>b.firstVerifiedAt.valueOf()-a.firstVerifiedAt.valueOf())[0],submitSuccess:p,hasBlockingError:t?.isBlocking??!1,error:t?.error,onClose:y,onBack:()=>{l(null),u(void 0)},handleSubmit:()=>w(r).catch(u)}):k?(0,d.jsx)(i.a,{submitSuccess:p,hasBlockingError:t?.isBlocking??!1,handleSubmitCode:w,selectedMethod:k,onClose:y,onBack:j.length>1?()=>l(null):void 0}):(0,d.jsx)(i.b,{mfaMethods:j,onSelect:x,handleClose:y}):null}}};