"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4884],{74884:(e,a,t)=>{t.r(a),t.d(a,{EmbeddedWalletPasswordCreateScreen:()=>i,default:()=>i});var s=t(73788),r=t(65936),l=t(75187),o=t(94968),n=t(86249),u=t(79312),c=t(51273);t(30404),t(7764),t(28349),t(32709),t(57668),t(81055),t(83726);let i={component:()=>{let{navigate:e,data:a,onUserCloseViaDialogOrKeybindRef:t}=(0,u.a)(),i=(0,l.u)(),[d,h]=(0,r.useState)(""),[w,y]=(0,r.useState)(!1),[f,S]=(0,r.useState)(),[p,m]=(0,r.useState)(null),{create:v}=(0,o.v)(),{authenticated:C,user:g}=(0,u.u)(),{closePrivyModal:b,isNewUserThisSession:P,initializeWalletProxy:E}=(0,n.u)(),{onSuccess:U,onFailure:x,callAuthOnSuccessOnClose:O,shouldCreateEth:A,shouldCreateSol:T}=a.createWallet,[I,M]=(0,r.useState)(null),k=new o.R(async()=>{try{let a;if(A&&T)a=await v({recoveryMethod:"user-passcode",recoveryPassword:f,chainType:"ethereum",walletIndex:0,latestUser:g}),a=await v({chainType:"solana",walletIndex:0,latestUser:a.user});else if(T)a=await v({recoveryMethod:"user-passcode",recoveryPassword:f,chainType:"solana",walletIndex:0,latestUser:g});else{if(!A)throw Error("Invalid args to create wallet");a=await v({recoveryMethod:"user-passcode",recoveryPassword:f,chainType:"ethereum",walletIndex:0,latestUser:g})}M(a),P?e("EmbeddedWalletCreatedScreen"):(U(a),b({shouldCallAuthOnSuccess:O}))}catch(e){h(e.message)}});return(0,r.useEffect)(()=>{p||E(3e4).then(e=>m(e))},[p]),(0,r.useEffect)(()=>{if(!C||!g)return e("LandingScreen"),void x(Error("User must be authenticated before creating a Privy wallet"))},[C]),t.current=()=>null,(0,s.jsx)(c.S,{config:{initiatedBy:"automatic"},appName:i?.name||"privy",loading:!p,buttonLoading:w,buttonHideAnimations:!I&&w,isResettingPassword:!1,error:d,password:f||"",onClose:()=>{I&&"user-passcode"!==I.account.recoveryMethod?(x(new n.m("User created a wallet but failed to set a password for it")),b({shouldCallAuthOnSuccess:!1})):I?(U(I),b({shouldCallAuthOnSuccess:O})):(x(new n.m("User wallet creation failed")),b({shouldCallAuthOnSuccess:!1}))},onPasswordChange:S,onPasswordGenerate:()=>S((0,c.g)()),onSubmit:async()=>(y(!0),k.execute().then(()=>new Promise(e=>setTimeout(e,250))).finally(()=>y(!1)))})}}}}]);