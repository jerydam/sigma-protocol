(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7540],{8579:(e,s,a)=>{"use strict";a.d(s,{E:()=>d});var r=a(73788);a(65936);var t=a(3696),n=a(494),l=a(35993);let i=(0,n.F)("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function d({className:e,variant:s,asChild:a=!1,...n}){let d=a?t.DX:"span";return(0,r.jsx)(d,{"data-slot":"badge",className:(0,l.cn)(i({variant:s}),e),...n})}},9025:(e,s,a)=>{"use strict";a.d(s,{F:()=>l});var r=a(73788);a(65936);var t=a(35155),n=a(35993);function l({className:e,children:s,...a}){return(0,r.jsxs)(t.bL,{"data-slot":"scroll-area",className:(0,n.cn)("relative",e),...a,children:[(0,r.jsx)(t.LM,{"data-slot":"scroll-area-viewport",className:"focus-visible:ring-ring/50 size-full rounded-[inherit] transition-[color,box-shadow] outline-none focus-visible:ring-[3px] focus-visible:outline-1",children:s}),(0,r.jsx)(i,{}),(0,r.jsx)(t.OK,{})]})}function i({className:e,orientation:s="vertical",...a}){return(0,r.jsx)(t.VM,{"data-slot":"scroll-area-scrollbar",orientation:s,className:(0,n.cn)("flex touch-none p-px transition-colors select-none","vertical"===s&&"h-full w-2.5 border-l border-l-transparent","horizontal"===s&&"h-2.5 flex-col border-t border-t-transparent",e),...a,children:(0,r.jsx)(t.lr,{"data-slot":"scroll-area-thumb",className:"bg-border relative flex-1 rounded-full"})})}},9344:(e,s,a)=>{"use strict";a.d(s,{J:()=>l});var r=a(73788);a(65936);var t=a(22050),n=a(35993);function l({className:e,...s}){return(0,r.jsx)(t.b,{"data-slot":"label",className:(0,n.cn)("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",e),...s})}},11557:(e,s,a)=>{"use strict";a.d(s,{S:()=>i});var r=a(73788);a(65936);var t=a(6576),n=a(83199),l=a(35993);function i({className:e,...s}){return(0,r.jsx)(t.bL,{"data-slot":"checkbox",className:(0,l.cn)("peer border-input dark:bg-input/30 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground dark:data-[state=checked]:bg-primary data-[state=checked]:border-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive size-4 shrink-0 rounded-[4px] border shadow-xs transition-shadow outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",e),...s,children:(0,r.jsx)(t.C1,{"data-slot":"checkbox-indicator",className:"flex items-center justify-center text-current transition-none",children:(0,r.jsx)(n.A,{className:"size-3.5"})})})}},38624:(e,s,a)=>{"use strict";a.d(s,{BT:()=>d,Wu:()=>o,ZB:()=>i,Zp:()=>n,aR:()=>l});var r=a(73788);a(65936);var t=a(35993);function n({className:e,...s}){return(0,r.jsx)("div",{"data-slot":"card",className:(0,t.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",e),...s})}function l({className:e,...s}){return(0,r.jsx)("div",{"data-slot":"card-header",className:(0,t.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",e),...s})}function i({className:e,...s}){return(0,r.jsx)("div",{"data-slot":"card-title",className:(0,t.cn)("leading-none font-semibold",e),...s})}function d({className:e,...s}){return(0,r.jsx)("div",{"data-slot":"card-description",className:(0,t.cn)("text-muted-foreground text-sm",e),...s})}function o({className:e,...s}){return(0,r.jsx)("div",{"data-slot":"card-content",className:(0,t.cn)("px-6",e),...s})}},54342:(e,s,a)=>{"use strict";a.d(s,{bq:()=>m,eb:()=>u,gC:()=>x,l6:()=>o,yv:()=>c});var r=a(73788);a(65936);var t=a(4105),n=a(1787),l=a(83199),i=a(92586),d=a(35993);function o({...e}){return(0,r.jsx)(t.bL,{"data-slot":"select",...e})}function c({...e}){return(0,r.jsx)(t.WT,{"data-slot":"select-value",...e})}function m({className:e,size:s="default",children:a,...l}){return(0,r.jsxs)(t.l9,{"data-slot":"select-trigger","data-size":s,className:(0,d.cn)("border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 dark:hover:bg-input/50 flex w-fit items-center justify-between gap-2 rounded-md border bg-transparent px-3 py-2 text-sm whitespace-nowrap shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-9 data-[size=sm]:h-8 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",e),...l,children:[a,(0,r.jsx)(t.In,{asChild:!0,children:(0,r.jsx)(n.A,{className:"size-4 opacity-50"})})]})}function x({className:e,children:s,position:a="popper",...n}){return(0,r.jsx)(t.ZL,{children:(0,r.jsxs)(t.UC,{"data-slot":"select-content",className:(0,d.cn)("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-(--radix-select-content-available-height) min-w-[8rem] origin-(--radix-select-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border shadow-md","popper"===a&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:a,...n,children:[(0,r.jsx)(h,{}),(0,r.jsx)(t.LM,{className:(0,d.cn)("p-1","popper"===a&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1"),children:s}),(0,r.jsx)(p,{})]})})}function u({className:e,children:s,...a}){return(0,r.jsxs)(t.q7,{"data-slot":"select-item",className:(0,d.cn)("focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2",e),...a,children:[(0,r.jsx)("span",{className:"absolute right-2 flex size-3.5 items-center justify-center",children:(0,r.jsx)(t.VF,{children:(0,r.jsx)(l.A,{className:"size-4"})})}),(0,r.jsx)(t.p4,{children:s})]})}function h({className:e,...s}){return(0,r.jsx)(t.PP,{"data-slot":"select-scroll-up-button",className:(0,d.cn)("flex cursor-default items-center justify-center py-1",e),...s,children:(0,r.jsx)(i.A,{className:"size-4"})})}function p({className:e,...s}){return(0,r.jsx)(t.wn,{"data-slot":"select-scroll-down-button",className:(0,d.cn)("flex cursor-default items-center justify-center py-1",e),...s,children:(0,r.jsx)(n.A,{className:"size-4"})})}},55934:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>eJ});var r=a(73788),t=a(65936),n=a(86708),l=a(27784),i=a(54258),d=a(48712),o=a(91717),c=a(83199),m=a(33140),x=a(25751),u=a(89581),h=a(7338),p=a(51647),b=a(35993);function f({className:e,...s}){return(0,r.jsx)(p.bL,{"data-slot":"tabs",className:(0,b.cn)("flex flex-col gap-2",e),...s})}function g({className:e,...s}){return(0,r.jsx)(p.B8,{"data-slot":"tabs-list",className:(0,b.cn)("bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-lg p-[3px]",e),...s})}function j({className:e,...s}){return(0,r.jsx)(p.l9,{"data-slot":"tabs-trigger",className:(0,b.cn)("data-[state=active]:bg-background dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-md border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:shadow-sm [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",e),...s})}function v({className:e,...s}){return(0,r.jsx)(p.UC,{"data-slot":"tabs-content",className:(0,b.cn)("flex-1 outline-none",e),...s})}var N=a(38624),w=a(78641),y=a(37261),k=a(49455),C=a(89605),A=a(34389),S=a(22307),E=a(1915),O=a(28772),T=a(89480),_=a(75581),$=a(3770),F=a(99801),z=a(70729),P=a(75286),D=a(42821),I=a(97365),L=a(58610),R=a(63258),M=a(9344);function H({className:e,...s}){return(0,r.jsx)("textarea",{"data-slot":"textarea",className:(0,b.cn)("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),...s})}var B=a(11557),q=a(77906);function U({...e}){return(0,r.jsx)(q.bL,{"data-slot":"dialog",...e})}function W({...e}){return(0,r.jsx)(q.ZL,{"data-slot":"dialog-portal",...e})}function Z({className:e,...s}){return(0,r.jsx)(q.hJ,{"data-slot":"dialog-overlay",className:(0,b.cn)("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",e),...s})}function V({className:e,children:s,showCloseButton:a=!0,...t}){return(0,r.jsxs)(W,{"data-slot":"dialog-portal",children:[(0,r.jsx)(Z,{}),(0,r.jsxs)(q.UC,{"data-slot":"dialog-content",className:(0,b.cn)("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",e),...t,children:[s,a&&(0,r.jsxs)(q.bm,{"data-slot":"dialog-close",className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[(0,r.jsx)(S.A,{}),(0,r.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})}function J({className:e,...s}){return(0,r.jsx)("div",{"data-slot":"dialog-header",className:(0,b.cn)("flex flex-col gap-2 text-center sm:text-left",e),...s})}function G({className:e,...s}){return(0,r.jsx)(q.hE,{"data-slot":"dialog-title",className:(0,b.cn)("text-lg leading-none font-semibold",e),...s})}var Y=a(14803),X=a(97008),K=a(63769);function Q({isOpen:e,onClose:s,status:a,title:t,description:n,txHash:l}){if(!a&&!e)return null;let i="success"===a,d="error"===a,o=d?function(e=""){if(!e)return"Unknown error occurred.";let s=e.match(/reason="([^"]+)"/);if(s&&s[1])return"Execution failed"===s[1]?"Transaction failed during execution. This usually means the Treasury lacks funds or the operation is invalid.":s[1];let a=e.match(/execution reverted: ([^"]+)/);return a&&a[1]?a[1]:e.toLowerCase().includes("user rejected")?"Transaction was rejected by the user.":e.toLowerCase().includes("insufficient funds")?"Insufficient ETH/CELO to pay for gas.":e.includes("code=CALL_EXCEPTION")||e.includes('data="0x')?"Transaction failed on-chain. Please check if the Treasury has enough funds.":e.length>150?e.substring(0,147)+"...":e}(n):n;return(0,r.jsx)(U,{open:e,onOpenChange:s,children:(0,r.jsxs)(V,{className:"w-[90%] max-w-25 rounded-xl p-0 gap-0 overflow-hidden bg-card border-border shadow-2xl",children:[(0,r.jsxs)("div",{className:`flex flex-col items-center justify-center pt-8 pb-6 px-6 ${d?"bg-red-500/5":i?"bg-emerald-500/5":"bg-muted/30"}`,children:[(0,r.jsxs)("div",{className:"mb-4 relative",children:["loading"===a&&(0,r.jsx)(D.A,{className:"h-14 w-14 animate-spin text-primary"}),i&&(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("div",{className:"absolute inset-0 bg-emerald-500 blur-xl opacity-20 rounded-full"}),(0,r.jsx)(Y.A,{className:"h-16 w-16 text-emerald-500 relative z-10 animate-in zoom-in duration-300"})]}),d&&(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("div",{className:"absolute inset-0 bg-red-500 blur-xl opacity-20 rounded-full"}),(0,r.jsx)(X.A,{className:"h-16 w-16 text-red-500 relative z-10 animate-in zoom-in duration-300"})]})]}),(0,r.jsx)(J,{className:"space-y-1",children:(0,r.jsx)(G,{className:"text-center text-xl font-bold tracking-tight",children:t||(i?"Success!":d?"Failed":"Processing...")})})]}),(0,r.jsxs)("div",{className:"p-6 space-y-4",children:[(0,r.jsx)("div",{className:"text-center px-2",children:(0,r.jsx)("p",{className:"text-sm text-muted-foreground leading-relaxed wrap-break-words",children:o})}),i&&l&&(0,r.jsx)("div",{className:"flex justify-center",children:(0,r.jsxs)("a",{href:`https://sepolia.celoscan.io/tx/${l}`,target:"_blank",rel:"noreferrer",className:"inline-flex items-center gap-1.5 px-3 py-1.5 rounded-full bg-primary/5 text-primary hover:bg-primary/10 transition-colors text-xs font-medium",children:["View on Explorer",(0,r.jsx)(K.A,{className:"h-3 w-3"})]})}),d&&n!==o&&(0,r.jsxs)("details",{className:"text-xs text-left",children:[(0,r.jsxs)("summary",{className:"cursor-pointer text-muted-foreground hover:text-foreground list-none flex items-center justify-center gap-1 py-2",children:[(0,r.jsx)(P.A,{className:"h-3 w-3"})," ",(0,r.jsx)("span",{className:"underline decoration-dotted",children:"View technical details"})]}),(0,r.jsx)("div",{className:"mt-2 p-2 bg-muted rounded border border-border/50 max-h-25 overflow-y-auto font-mono text-[10px] break-all whitespace-pre-wrap text-muted-foreground",children:n})]})]}),(0,r.jsx)("div",{className:"p-6 pt-0",children:(0,r.jsx)(h.$,{onClick:s,className:`w-full font-semibold shadow-sm ${d?"bg-destructive text-destructive-foreground hover:bg-destructive/90":"bg-primary hover:bg-primary/90"}`,size:"lg",children:d?"Close":"Done"})})]})})}var ee=a(54342),es=a(83483),ea=a(78123),er=a(65331),et=a(4855),en=a(36443);let el=[{name:"cUSD (Testnet)",symbol:"cUSD",address:"0x874068565b93198084D1f6874E2f768E6B1516e8"},{name:"cEUR (Testnet)",symbol:"cEUR",address:"0x10c6609C0637B194e823A449b2c3a51D1415fF78"},{name:"WETH",symbol:"WETH",address:"0x4200000000000000000000000000000000000006"},{name:"Custom Token",symbol:"???",address:"custom"}],ei=[{name:"Uniswap (Celo)",address:"0x62a8F0D03F66D6C655d81C9d3163E5d39A1e2226",abi:["function swapExactTokensForTokens(uint amountIn, uint amountOutMin, address[] calldata path, address to, uint deadline) returns (uint[] memory amounts)","function swapExactETHForTokens(uint amountOutMin, address[] calldata path, address to, uint deadline) returns (uint[] memory amounts)"]},{name:"Ubeswap (Celo)",address:"0x44760E45c711a37c4A462137F8E4d4d122245b63",abi:["function swapExactTokensForTokens(uint amountIn, uint amountOutMin, address[] calldata path, address to, uint deadline) returns (uint[] memory amounts)"]}];function ed({isOpen:e,onClose:s,controllerAddress:a,defaultTab:n="transfer"}){let i,{wallets:d}=(0,I.u)(),[o,c]=(0,t.useState)(n),m=(0,t.useRef)(null),[x,u]=(0,t.useState)("single"),[p,b]=(0,t.useState)("equal"),[w,y]=(0,t.useState)("eth"),[A,q]=(0,t.useState)(""),[U,W]=(0,t.useState)(""),[Z,V]=(0,t.useState)(""),[J,G]=(0,t.useState)(""),[Y,X]=(0,t.useState)(null),[K,ed]=(0,t.useState)(""),[eo,ec]=(0,t.useState)("0"),[em,ex]=(0,t.useState)("0x"),[eu,eh]=(0,t.useState)(ei[0].address),[ep,eb]=(0,t.useState)(el[0].address),[ef,eg]=(0,t.useState)(el[1].address),[ej,ev]=(0,t.useState)(""),[eN,ew]=(0,t.useState)(""),[ey,ek]=(0,t.useState)(""),[eC,eA]=(0,t.useState)(""),[eS,eE]=(0,t.useState)(!0),[eO,eT]=(0,t.useState)(!1),[e_,e$]=(0,t.useState)(null),[eF,ez]=(0,t.useState)({isOpen:!1,type:null,title:"",description:""});if((0,t.useEffect)(()=>{e&&c(n)},[e,n]),(0,t.useEffect)(()=>{if("custom"===o){if(ed(""),ec("0"),ex("0x"),!eu||!ep||!ef||!ej||"0"===ej)return void e$("Fill out all swap fields to generate the transaction.");try{let e=ei.find(e=>e.address===eu);if(!e)throw Error("Invalid platform selected.");let s=er.g5(ej).toString(),r=((e,s,a,r,t)=>{try{let n=new ea.KA(e.abi),l=Math.floor(Date.now()/1e3)+1800;return n.encodeFunctionData("swapExactTokensForTokens",[r,0,[s,a],t,l])}catch(e){throw console.error("Calldata generation error:",e),Error("Failed to generate swap calldata. Check token addresses.")}})(e,ep,ef,s,a);ed(eu),ec("0"),ex(r),e$(null)}catch(e){e$(e.message||"Could not auto-generate swap transaction. Check inputs."),ed(""),ex("0x")}}},[eu,ep,ef,ej,o,a]),!e)return null;let eP=e=>e.split(/[\n]+/).map(e=>e.trim()).filter(e=>""!==e),eD=async()=>{e$(null),eT(!0);try{let e,s=d[0];if(!s)throw Error("Wallet not connected");let r=await s.getEthereumProvider(),t=new L.k(r),n=await t.getSigner();if("owner"===o){if(!et.PW(ey))throw Error("Invalid Address");if(!eN)throw Error("Name required");e=await (0,es.NR)(a,ey,eN,Number(eC),eS)}else if("custom"===o){if(!em||"0x"===em)throw Error("Transaction data is incomplete.");e=await (0,es.hd)(a,K,eo||"0",!1,en.j,em,n)}else{let s=Z.split(/[\n]+/).map(e=>e.trim()).filter(e=>""!==e),r=J.split(/[\n]+/).map(e=>e.trim()).filter(e=>""!==e),t="token"===w,l=en.j;t&&(l="custom"===A?U:A),e="single"===x?await (0,es.hd)(a,s[0],r[0],t,l,"0x",n):"equal"===p?await (0,es.am)(a,l,s,r[0]):await (0,es.ZG)(a,l,s,r)}ez({isOpen:!0,type:"success",title:"Proposal Submitted",description:"Your transaction proposal has been created successfully.",txHash:e?.hash})}catch(e){console.error(e),e$(e.message||"Failed to submit transaction")}finally{eT(!1)}};if(!e)return null;let eI=el.filter(e=>e.address!==ep),eL=el.filter(e=>e.address!==ef);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"fixed inset-0 z-50 bg-black/60 backdrop-blur-sm flex items-center justify-center p-4 animate-in fade-in duration-200",children:(0,r.jsxs)(N.Zp,{className:"w-full max-w-xl border-border bg-card max-h-[90vh] overflow-hidden flex flex-col shadow-2xl",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-border bg-muted/20",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"text-xl font-bold",children:"New Proposal"}),(0,r.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:"Create a new action for owners to approve"})]}),(0,r.jsx)(h.$,{variant:"ghost",size:"icon",onClick:s,className:"rounded-full hover:bg-destructive/10 hover:text-destructive",children:(0,r.jsx)(S.A,{className:"h-5 w-5"})})]}),(0,r.jsx)("div",{className:"overflow-y-auto p-6",children:(0,r.jsxs)(f,{value:o,onValueChange:e=>c(e),className:"w-full",children:[(0,r.jsxs)(g,{className:"grid w-full grid-cols-3 mb-6",children:[(0,r.jsxs)(j,{value:"transfer",className:"gap-2",children:[(0,r.jsx)(l.A,{className:"h-4 w-4"})," Transfer"]}),(0,r.jsxs)(j,{value:"owner",className:"gap-2",children:[(0,r.jsx)(E.A,{className:"h-4 w-4"})," Add Owner"]}),(0,r.jsxs)(j,{value:"custom",className:"gap-2",children:[(0,r.jsx)(O.A,{className:"h-4 w-4"})," DeFi Swap"]})," "]}),(0,r.jsxs)(v,{value:"transfer",className:"space-y-6 animate-in slide-in-from-left-2 duration-300",children:[(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{className:`cursor-pointer border-2 rounded-xl p-4 flex flex-col items-center gap-2 transition-all ${"eth"===w?"border-primary bg-primary/5":"border-border hover:border-primary/50"}`,onClick:()=>y("eth"),children:[(0,r.jsx)("div",{className:`p-2 rounded-full ${"eth"===w?"bg-primary text-primary-foreground":"bg-muted"}`,children:(0,r.jsx)(C.A,{className:"h-5 w-5"})}),(0,r.jsx)("span",{className:"font-medium text-sm",children:"Celo"})]}),(0,r.jsxs)("div",{className:`cursor-pointer border-2 rounded-xl p-4 flex flex-col items-center gap-2 transition-all ${"token"===w?"border-primary bg-primary/5":"border-border hover:border-primary/50"}`,onClick:()=>y("token"),children:[(0,r.jsx)("div",{className:`p-2 rounded-full ${"token"===w?"bg-primary text-primary-foreground":"bg-muted"}`,children:(0,r.jsx)(l.A,{className:"h-5 w-5"})}),(0,r.jsx)("span",{className:"font-medium text-sm",children:"ERC20 Token"})]})]}),"token"===w&&(0,r.jsxs)("div",{className:"space-y-2 animate-in fade-in slide-in-from-top-2",children:[(0,r.jsx)(M.J,{children:"Select Token"}),(0,r.jsxs)(ee.l6,{value:A,onValueChange:q,children:[(0,r.jsx)(ee.bq,{className:"h-11",children:(0,r.jsx)(ee.yv,{placeholder:"Select a token..."})}),(0,r.jsx)(ee.gC,{children:el.map(e=>(0,r.jsx)(ee.eb,{value:e.address,children:e.name},e.address))})]}),"custom"===A&&(0,r.jsx)(R.p,{placeholder:"Contract Address (0x...)",value:U,onChange:e=>W(e.target.value),className:"mt-2"})]}),(0,r.jsx)("div",{className:"border-t border-border my-2"}),(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsx)(M.J,{children:"Who are you sending to?"}),(0,r.jsxs)("div",{className:"flex gap-3",children:[(0,r.jsxs)(h.$,{variant:"single"===x?"default":"outline",className:"flex-1 h-auto py-3 flex-col gap-1",onClick:()=>u("single"),children:[(0,r.jsx)("span",{className:"font-semibold",children:"Single Person"}),(0,r.jsx)("span",{className:"text-[10px] font-normal opacity-80",children:"One recipient"})]}),(0,r.jsxs)(h.$,{variant:"batch"===x?"default":"outline",className:"flex-1 h-auto py-3 flex-col gap-1",onClick:()=>u("batch"),children:[(0,r.jsx)("span",{className:"font-semibold",children:"Send to Many"}),(0,r.jsx)("span",{className:"text-[10px] font-normal opacity-80",children:"Batch / List"})]})]})]}),"single"===x?(0,r.jsxs)("div",{className:"grid gap-4",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(M.J,{children:"Recipient Address"}),(0,r.jsx)(R.p,{placeholder:"0x...",value:Z,onChange:e=>V(e.target.value)})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(M.J,{children:"Amount"}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)(R.p,{type:"number",placeholder:"0.00",value:J,onChange:e=>G(e.target.value),className:"pl-8 font-mono"}),(0,r.jsx)("span",{className:"absolute left-3 top-2.5 text-muted-foreground text-xs",children:"$"})]})]})]}):(0,r.jsxs)("div",{className:"space-y-4 animate-in fade-in",children:[(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,r.jsxs)("label",{className:`flex items-center gap-2 p-3 rounded border cursor-pointer ${"equal"===p?"border-primary bg-primary/5":"bg-background"}`,children:[(0,r.jsx)("input",{type:"radio",name:"btype",checked:"equal"===p,onChange:()=>b("equal"),className:"accent-primary"}),(0,r.jsx)("span",{children:"Same amount for everyone"})]}),(0,r.jsxs)("label",{className:`flex items-center gap-2 p-3 rounded border cursor-pointer ${"different"===p?"border-primary bg-primary/5":"bg-background"}`,children:[(0,r.jsx)("input",{type:"radio",name:"btype",checked:"different"===p,onChange:()=>b("different"),className:"accent-primary"}),(0,r.jsx)("span",{children:"Different amounts"})]})]}),Y?(0,r.jsxs)("div",{className:"flex items-center justify-between bg-primary/10 border border-primary/20 p-3 rounded-lg",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)(_.A,{className:"h-5 w-5 text-primary"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm font-medium text-primary",children:Y}),(0,r.jsxs)("p",{className:"text-xs text-muted-foreground",children:["Loaded ",eP(Z).length," addresses"]})]})]}),(0,r.jsx)(h.$,{variant:"ghost",size:"icon",onClick:()=>{X(null),V(""),G(""),e$(null)},className:"text-destructive hover:bg-destructive/10",children:(0,r.jsx)($.A,{className:"h-4 w-4"})})]}):(0,r.jsxs)("div",{className:"border-2 border-dashed border-muted-foreground/25 rounded-xl p-6 flex flex-col items-center justify-center text-center cursor-pointer hover:bg-muted/30 transition-colors",onClick:()=>m.current?.click(),children:[(0,r.jsx)("div",{className:"bg-muted p-3 rounded-full mb-2",children:(0,r.jsx)(T.A,{className:"h-5 w-5 text-muted-foreground"})}),(0,r.jsx)("p",{className:"text-sm font-medium",children:"Click to upload CSV or Text file"}),(0,r.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:"Format: address, amount"}),(0,r.jsx)("input",{type:"file",ref:m,className:"hidden",accept:".csv,.txt,.doc,.docx",onChange:e=>{let s=e.target.files?.[0];if(!s)return;X(s.name),e$(null);let a=new FileReader;a.onload=e=>{try{let s=e.target?.result;if(!s)throw Error("Empty file");let a=s.split(/\r?\n/),r=[],t=[];if(a.forEach(e=>{let s=e.trim();if(!s||/^address/i.test(s))return;let a=s.split(/[,;\t|]+/),n=a[0]?.trim(),l=a[1]?.trim();n&&(n.startsWith("0x")||n.includes("."))&&(r.push(n),l&&!isNaN(parseFloat(l))?t.push(l):"different"===p&&t.push("0"))}),0===r.length){e$("No valid addresses found in file."),X(null);return}V(r.join("\n")),"different"===p?G(t.join("\n")):"equal"===p&&t.length>0&&G(t[0])}catch(e){e$("Failed to parse file.")}},a.readAsText(s),e.target.value=""}})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("div",{className:"flex justify-between items-center",children:(0,r.jsx)(M.J,{className:"text-xs text-muted-foreground uppercase tracking-wider",children:"Or enter manually"})}),(0,r.jsxs)("div",{className:"grid grid-cols-3 gap-2",children:[(0,r.jsx)(H,{placeholder:"0x123... 0x456...",value:Z,onChange:e=>V(e.target.value),className:"col-span-2 h-24 font-mono text-xs resize-none bg-muted/20"}),(0,r.jsx)(H,{placeholder:"equal"===p?"1.5":"1.5\n2.0",value:J,onChange:e=>G(e.target.value),className:"col-span-1 h-24 font-mono text-xs resize-none bg-muted/20"})]})]})]})]}),(0,r.jsxs)(v,{value:"owner",className:"space-y-5 animate-in slide-in-from-right-2 duration-300",children:[(0,r.jsxs)("div",{className:"flex items-start gap-3 p-4 bg-blue-500/10 border border-blue-500/20 rounded-xl",children:[(0,r.jsx)(F.A,{className:"h-5 w-5 text-blue-600 mt-0.5"}),(0,r.jsxs)("div",{className:"text-sm text-blue-900 dark:text-blue-200",children:[(0,r.jsx)("p",{className:"font-semibold",children:"Add New Signer"}),(0,r.jsx)("p",{className:"opacity-90 text-xs mt-0.5",children:"This creates a proposal. Other owners must approve it before the new signer is added."})]})]}),(0,r.jsxs)("div",{className:"grid gap-4",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(M.J,{children:"New Owner Address"}),(0,r.jsx)(R.p,{placeholder:"0x...",value:ey,onChange:e=>ek(e.target.value)})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(M.J,{children:"Role / Name"}),(0,r.jsx)(R.p,{placeholder:"e.g. CFO",value:eN,onChange:e=>ew(e.target.value)})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(M.J,{children:"Voting Power (%)"}),(0,r.jsx)(R.p,{type:"number",value:eC,onChange:e=>eA(e.target.value)})]})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-2 border p-3 rounded-lg",children:[(0,r.jsx)(B.S,{id:"removable",checked:eS,onCheckedChange:e=>eE(!!e)}),(0,r.jsxs)("div",{className:"grid gap-1.5 leading-none",children:[(0,r.jsx)(M.J,{htmlFor:"removable",className:"cursor-pointer",children:"Is Removable?"}),(0,r.jsx)("p",{className:"text-xs text-muted-foreground",children:"If unchecked, this owner can never be removed."})]})]})]})]}),(0,r.jsxs)(v,{value:"custom",className:"space-y-4 animate-in fade-in",children:[(0,r.jsxs)("div",{className:"space-y-4 p-4 border rounded-lg bg-primary/5 animate-in fade-in",children:[(0,r.jsxs)("p",{className:"font-semibold flex items-center gap-2",children:[(0,r.jsx)(O.A,{className:"h-5 w-5"})," Automated Token Swap"]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(M.J,{children:"Select Platform"}),(0,r.jsxs)(ee.l6,{value:eu,onValueChange:eh,children:[(0,r.jsx)(ee.bq,{children:(0,r.jsx)(ee.yv,{placeholder:"Select a DEX..."})}),(0,r.jsx)(ee.gC,{children:ei.map(e=>(0,r.jsx)(ee.eb,{value:e.address,children:e.name},e.address))})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-3 gap-3",children:[(0,r.jsxs)("div",{className:"col-span-1 space-y-2",children:[(0,r.jsx)(M.J,{children:"Amount"}),(0,r.jsx)(R.p,{type:"number",placeholder:"10.00",value:ej,onChange:e=>ev(e.target.value)})]}),(0,r.jsxs)("div",{className:"col-span-2 space-y-2",children:[(0,r.jsx)(M.J,{children:"Token In (To Sell)"}),(0,r.jsxs)(ee.l6,{value:ep,onValueChange:eb,children:[(0,r.jsx)(ee.bq,{children:(0,r.jsx)(ee.yv,{placeholder:"Select Token In..."})}),(0,r.jsx)(ee.gC,{children:eL.map(e=>(0,r.jsx)(ee.eb,{value:e.address,children:e.name},e.address))})]})]})]}),(0,r.jsx)("div",{className:"flex items-center justify-center",children:(0,r.jsx)(z.A,{className:"h-5 w-5 text-muted-foreground"})}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(M.J,{children:"Token Out (To Buy)"}),(0,r.jsxs)(ee.l6,{value:ef,onValueChange:eg,children:[(0,r.jsx)(ee.bq,{children:(0,r.jsx)(ee.yv,{placeholder:"Select Token Out..."})}),(0,r.jsx)(ee.gC,{children:eI.map(e=>(0,r.jsx)(ee.eb,{value:e.address,children:e.name},e.address))})]})]}),(0,r.jsx)("div",{className:"p-3 bg-yellow-500/10 border border-yellow-500/20 rounded text-xs text-yellow-800 dark:text-yellow-300",children:"NOTE: This only generates the **swap call**. You must submit a separate **Approval** transaction if the contract isn't already approved to spend the **Token In** amount."})]}),(0,r.jsxs)("div",{className:"space-y-4 pt-2",children:[(0,r.jsxs)("div",{className:"space-y-1",children:[(0,r.jsx)(M.J,{children:"Target Contract"}),(0,r.jsx)(R.p,{value:K,readOnly:!0,className:"bg-muted font-mono text-sm",placeholder:"Platform Address (0x...)"})]}),(0,r.jsxs)("div",{className:"grid grid-cols-3 gap-3",children:[(0,r.jsxs)("div",{className:"col-span-1 space-y-1",children:[(0,r.jsx)(M.J,{children:"Value (Celo)"}),(0,r.jsx)(R.p,{type:"text",value:eo,readOnly:!0,className:"bg-muted font-mono text-sm"})]}),(0,r.jsxs)("div",{className:"col-span-2 space-y-1",children:[(0,r.jsx)(M.J,{children:"Calldata Status"}),(0,r.jsx)("div",{className:`p-2 rounded text-xs text-center font-semibold ${"0x"===em?"bg-red-500/10 text-red-600 border border-red-500/20":"bg-green-500/10 text-green-600 border border-green-500/20"}`,children:"0x"===em?"Awaiting Input":"Calldata Generated"})]})]}),(0,r.jsxs)("div",{className:"space-y-1",children:[(0,r.jsx)(M.J,{children:"Calldata (Function Call)"}),(0,r.jsx)(H,{value:em,readOnly:!0,className:"font-mono text-xs min-h-25 bg-muted break-all",placeholder:"Generated calldata (0x...)"})]})]})]})]})}),(0,r.jsxs)("div",{className:"p-6 border-t border-border bg-muted/20 flex flex-col gap-4",children:["transfer"===o&&(0,r.jsxs)("div",{className:"flex items-center justify-between text-sm px-2",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 text-muted-foreground",children:[(0,r.jsx)(E.A,{className:"h-4 w-4"}),(0,r.jsxs)("span",{children:["Recipients: ",(0,r.jsx)("span",{className:"font-mono font-bold text-foreground",children:eP(Z).length})]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2 text-muted-foreground",children:[(0,r.jsx)(C.A,{className:"h-4 w-4"}),(0,r.jsxs)("span",{children:["Total: ",(0,r.jsx)("span",{className:"font-mono font-bold text-foreground",children:0===(i=eP(J)).length?"0":"batch"===x&&"equal"===p?(parseFloat(i[0])*eP(Z).length).toFixed(4):i.reduce((e,s)=>e+(parseFloat(s)||0),0).toFixed(4)})]})]})]}),e_&&(0,r.jsxs)("div",{className:"p-3 bg-red-500/10 border border-red-500/20 rounded-lg text-sm text-red-600 flex gap-2 items-start",children:[(0,r.jsx)(P.A,{className:"h-4 w-4 shrink-0 mt-0.5"}),(0,r.jsx)("span",{className:"break-all",children:e_})]}),(0,r.jsxs)("div",{className:"flex gap-3",children:[(0,r.jsx)(h.$,{variant:"outline",className:"flex-1",onClick:s,disabled:eO,children:"Cancel"}),(0,r.jsxs)(h.$,{className:"flex-2",onClick:eD,disabled:eO,children:[eO?(0,r.jsx)(D.A,{className:"h-4 w-4 animate-spin"}):(0,r.jsx)(k.A,{className:"h-4 w-4 mr-2"}),"Submit Proposal"]})]})]})]})}),(0,r.jsx)(Q,{isOpen:eF.isOpen,onClose:()=>{ez(e=>({...e,isOpen:!1})),s()},status:eF.type,title:eF.title,description:eF.description,txHash:eF.txHash})]})}var eo=a(23439),ec=a(39902);function em(e){if(null==e)return"0.0000";let s=e.toString();if(s.includes("."))return parseFloat(s).toFixed(4);try{let e=BigInt(s);return(Number(e)/1e18).toFixed(4)}catch(s){return console.error("Error formatting amount:",e),"0.0000"}}let ex=["function name() view returns (string)","function symbol() view returns (string)","function decimals() view returns (uint8)","function balanceOf(address) view returns (uint256)"],eu=[{name:"Mento Dollar",symbol:"USDm",address:"0xdE9e4C3ce781b4bA68120d6261cbad65ce0aB00b",coingeckoId:"celo-dollar"},{name:"Mento USDC (Testnet)",symbol:"USDC",address:"0xBD63e46Be8eF8D89dFde3054E7b9ECAEb8Ad83e9",coingeckoId:"celo-euro"},{name:"WETH",symbol:"WETH",address:"0x4200000000000000000000000000000000000006",coingeckoId:"weth"}];function eh({isOpen:e,onClose:s,multisig:a}){let{wallets:n}=(0,I.u)(),[i,d]=(0,t.useState)([]),[o,c]=(0,t.useState)(!1),m=async()=>{if(n[0]&&e){c(!0);try{let e=await n[0].getEthereumProvider(),s=new L.k(e),r=new Set;eu.forEach(e=>r.add(e.address.toLowerCase())),a.transactions.forEach(e=>{e.isTokenTransfer&&e.tokenAddress&&e.tokenAddress!==en.j&&r.add(e.tokenAddress.toLowerCase())});let t=[];for(let e of Array.from(r))try{let r=new ec.NZ(e,ex,s),[n,l,i,d]=await Promise.all([r.symbol(),r.decimals(),r.balanceOf(a.wallet),r.name().catch(()=>"Unknown Token")]),o=er.Js(i,l);(eu.some(s=>s.address.toLowerCase()===e)||parseFloat(o)>0)&&t.push({address:e,symbol:n,name:d,decimals:Number(l),balance:o})}catch(s){console.warn(`Failed to load token ${e}`,s)}d(t)}catch(e){console.error("Asset fetch error:",e)}finally{c(!1)}}};return(0,t.useEffect)(()=>{e&&m()},[e]),(0,r.jsx)(U,{open:e,onOpenChange:s,children:(0,r.jsxs)(V,{className:"sm:max-w-md",children:[(0,r.jsx)(J,{children:(0,r.jsxs)(G,{className:"flex items-center gap-2",children:[(0,r.jsx)(C.A,{className:"h-5 w-5 text-primary"})," Treasury Assets"]})}),(0,r.jsxs)("div",{className:"space-y-4 py-2",children:[(0,r.jsx)(N.Zp,{className:"bg-primary/5 border-primary/20",children:(0,r.jsxs)(N.Wu,{className:"p-4 flex justify-between items-center",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)("div",{className:"h-10 w-10 rounded-full bg-primary/20 flex items-center justify-center",children:(0,r.jsx)(l.A,{className:"h-5 w-5 text-primary"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"font-bold",children:"CELO"}),(0,r.jsx)("p",{className:"text-xs text-muted-foreground",children:"Native Token"})]})]}),(0,r.jsxs)("div",{className:"text-right",children:[(0,r.jsx)("p",{className:"text-xl font-bold",children:parseFloat(a.balance).toFixed(4)}),(0,r.jsx)("p",{className:"text-xs text-muted-foreground",children:"Native"})]})]})}),(0,r.jsxs)("div",{className:"flex items-center justify-between px-1 mt-4",children:[(0,r.jsx)("h4",{className:"text-sm font-medium text-muted-foreground",children:"ERC20 Tokens"}),(0,r.jsx)(h.$,{variant:"ghost",size:"icon",onClick:m,className:"h-6 w-6",disabled:o,children:(0,r.jsx)(w.A,{className:`h-3.5 w-3.5 ${o?"animate-spin":""}`})})]}),(0,r.jsx)("div",{className:"space-y-2 max-h-75 overflow-y-auto pr-1",children:o&&0===i.length?(0,r.jsx)("div",{className:"flex justify-center py-8",children:(0,r.jsx)(D.A,{className:"h-6 w-6 animate-spin text-muted-foreground"})}):i.length>0?i.map(e=>(0,r.jsxs)("div",{className:"flex items-center justify-between p-3 rounded-lg border bg-card hover:bg-muted/30 transition-colors",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)("div",{className:"h-9 w-9 rounded-full bg-orange-500/10 flex items-center justify-center text-orange-600 font-bold text-xs border border-orange-200",children:e.symbol.slice(0,2)}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"font-medium text-sm",children:e.name}),(0,r.jsxs)("a",{href:`https://sepolia.celoscan.io/token/${e.address}?a=${a.wallet}`,target:"_blank",className:"text-[10px] text-muted-foreground flex items-center gap-1 hover:text-primary",children:[e.symbol," ",(0,r.jsx)(eo.A,{className:"h-2.5 w-2.5"})]})]})]}),(0,r.jsx)("div",{className:"text-right",children:(0,r.jsx)("p",{className:"font-mono font-medium text-sm",children:em(e.balance)})})]},e.address)):(0,r.jsx)("div",{className:"text-center py-6 border-2 border-dashed rounded-lg bg-muted/10",children:(0,r.jsx)("p",{className:"text-sm text-muted-foreground",children:"No tokens found."})})})]})]})})}let ep=[{name:"Mento Dollar",symbol:"USDm",address:"0xdE9e4C3ce781b4bA68120d6261cbad65ce0aB00b",coingeckoId:"celo-dollar"},{name:"Mento USDC (Testnet)",symbol:"USDC",address:"0xBD63e46Be8eF8D89dFde3054E7b9ECAEb8Ad83e9",coingeckoId:"celo-euro"},{name:"WETH",symbol:"WETH",address:"0x4200000000000000000000000000000000000006",coingeckoId:"weth"}],eb=["function balanceOf(address) view returns (uint256)","function decimals() view returns (uint8)"];function ef({multisig:e}){let{wallets:s}=(0,I.u)(),[a,n]=(0,t.useState)(!1),[i,d]=(0,t.useState)(!1),[o,x]=(0,t.useState)(!1),[u,p]=(0,t.useState)(null),[b,f]=(0,t.useState)(!1),[g,j]=(0,t.useState)([]),v=async()=>{if(s[0]&&e.wallet){f(!0);try{let a=await s[0].getEthereumProvider(),r=new L.k(a),t={celo:.6,"celo-dollar":1,"celo-euro":1.08,weth:2500};try{let e=await fetch("https://api.coingecko.com/api/v3/simple/price?ids=celo,celo-dollar,celo-euro,weth&vs_currencies=usd"),s=await e.json();s.celo&&(t.celo=s.celo.usd),s["celo-dollar"]&&(t["celo-dollar"]=s["celo-dollar"].usd),s["celo-euro"]&&(t["celo-euro"]=s["celo-euro"].usd),s.weth&&(t.weth=s.weth.usd)}catch(e){console.warn("Using default prices")}let n=parseFloat(e.balance),l=n*t.celo,i=[{symbol:"CELO",balance:n.toFixed(2)}],d=0;for(let s of ep)if("custom"!==s.address)try{let a=new ec.NZ(s.address,eb,r),[n,l]=await Promise.all([a.balanceOf(e.wallet),a.decimals().catch(()=>18)]),o=parseFloat(er.Js(n,l)),c=t[s.coingeckoId]||0,m=o*c;d+=m,i.push({symbol:s.symbol,balance:o.toFixed(2)})}catch(e){console.warn(`Failed to load ${s.symbol}`)}j(i),p(l+d)}catch(e){console.error("Treasury calculation failed",e)}finally{f(!1)}}};(0,t.useEffect)(()=>{v()},[e.wallet,s[0]]);let S=e.transactions.filter(e=>!e.executed).length,E=[...e.transactions].slice(0,3),O=e.transactions.filter(e=>!e.executed&&Number(e.timelockEnd)>Date.now()/1e3),T=O.length>0?new Date(1e3*Number(O[0].timelockEnd)).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):null;return(0,r.jsxs)("div",{className:"space-y-6 animate-in fade-in duration-500",children:[(0,r.jsxs)("div",{className:"grid md:grid-cols-3 gap-6",children:[(0,r.jsxs)(N.Zp,{className:"md:col-span-2 border-border bg-card shadow-sm relative overflow-hidden",children:[(0,r.jsx)(N.aR,{className:"pb-2 relative z-10",children:(0,r.jsxs)(N.ZB,{className:"text-sm font-medium text-muted-foreground flex items-center gap-2",children:[(0,r.jsx)(l.A,{className:"h-4 w-4"})," Total Treasury Value"]})}),(0,r.jsxs)(N.Wu,{className:"relative z-10",children:[(0,r.jsx)("div",{className:"flex items-baseline gap-2",children:b?(0,r.jsx)("div",{className:"flex items-center gap-2 text-muted-foreground animate-pulse",children:(0,r.jsx)("span",{className:"text-4xl font-bold bg-muted h-10 w-32 rounded"})}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("span",{className:"text-4xl font-bold text-foreground",children:["$",(u||0).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})]}),(0,r.jsx)("span",{className:"text-xl font-medium text-muted-foreground",children:"USD"})]})}),(0,r.jsxs)("div",{className:"mt-4 flex items-center gap-2 text-sm text-muted-foreground bg-muted/50 p-2 rounded-lg w-fit",children:[(0,r.jsx)("span",{className:"opacity-70 text-xs uppercase tracking-wider font-semibold",children:"Wallet"}),(0,r.jsxs)("code",{className:"font-mono bg-background px-1.5 py-0.5 rounded border text-xs",children:[e.wallet.slice(0,8),"...",e.wallet.slice(-6)]}),(0,r.jsx)("button",{onClick:()=>{var s;return s=e.wallet,void(navigator.clipboard.writeText(s),n(!0),setTimeout(()=>n(!1),2e3))},className:"hover:text-primary ml-1 transition-colors",children:a?(0,r.jsx)(c.A,{className:"h-3.5 w-3.5 text-emerald-500"}):(0,r.jsx)(m.A,{className:"h-3.5 w-3.5"})}),(0,r.jsx)("button",{onClick:v,disabled:b,className:"ml-2 hover:text-primary",children:(0,r.jsx)(w.A,{className:`h-3.5 w-3.5 ${b?"animate-spin":""}`})})]}),!b&&g.length>0&&(0,r.jsx)("div",{className:"mt-4 flex gap-2 flex-wrap",children:g.map(e=>(0,r.jsxs)("div",{className:"text-[10px] bg-background border px-2 py-1 rounded-md whitespace-nowrap opacity-80",children:[(0,r.jsx)("span",{className:"font-bold",children:e.balance})," ",e.symbol]},e.symbol))})]}),(0,r.jsx)("div",{className:"absolute top-0 right-0 -mt-16 -mr-16 w-64 h-64 bg-primary/5 rounded-full blur-3xl pointer-events-none"})]}),(0,r.jsxs)(N.Zp,{className:"border-border bg-card shadow-sm",children:[(0,r.jsx)(N.aR,{className:"pb-2",children:(0,r.jsxs)(N.ZB,{className:"text-sm font-medium text-muted-foreground flex items-center gap-2",children:[(0,r.jsx)(y.A,{className:"h-4 w-4"})," Pending Actions"]})}),(0,r.jsxs)(N.Wu,{className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"text-3xl font-bold",children:S}),(0,r.jsx)("p",{className:"text-xs text-muted-foreground",children:"Transactions awaiting approval"})]}),(0,r.jsxs)("div",{className:"pt-4 border-t border-border/50",children:[(0,r.jsxs)("div",{className:"flex justify-between text-sm mb-1",children:[(0,r.jsx)("span",{className:"text-muted-foreground",children:"Timelock:"}),(0,r.jsxs)("span",{className:"font-mono bg-muted px-1.5 rounded text-xs",children:[(Number(e.config.timelockPeriod)/3600).toFixed(1),"h"]})]}),T&&(0,r.jsxs)("div",{className:"flex justify-between text-sm text-orange-500 font-medium",children:[(0,r.jsx)("span",{children:"Next Unlock:"}),(0,r.jsx)("span",{children:T})]})]})]})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[(0,r.jsxs)(h.$,{variant:"default",size:"lg",className:"h-auto py-6 flex flex-col items-center gap-2 shadow-sm hover:shadow-md transition-all border border-primary/20",onClick:()=>d(!0),children:[(0,r.jsx)(k.A,{className:"h-6 w-6"}),(0,r.jsx)("span",{className:"font-semibold",children:"New Transaction"})]}),(0,r.jsxs)(h.$,{variant:"outline",size:"lg",className:"h-auto py-6 flex flex-col items-center gap-2 hover:bg-muted/50 transition-all border-primary",onClick:()=>x(!0),children:[(0,r.jsx)(C.A,{className:"h-6 w-6 opacity-70 text-orange-500"}),(0,r.jsx)("span",{className:"font-semibold",children:"View All Assets"})]})]}),(0,r.jsxs)(N.Zp,{className:"border-border bg-card",children:[(0,r.jsx)(N.aR,{children:(0,r.jsxs)(N.ZB,{className:"text-base font-semibold flex items-center gap-2",children:[(0,r.jsx)(A.A,{className:"h-4 w-4 text-muted-foreground"})," Recent Activity"]})}),(0,r.jsx)(N.Wu,{children:0===E.length?(0,r.jsx)("div",{className:"text-center py-8 text-muted-foreground text-sm border-2 border-dashed rounded-lg bg-muted/10",children:"No recent transactions found."}):(0,r.jsx)("div",{className:"space-y-0 divide-y divide-border/50",children:E.map(s=>{let a=Number(s.confirmationCount)/e.owners.length*100;return(0,r.jsxs)("div",{className:"flex items-center justify-between py-4 first:pt-0 last:pb-0 px-2 -mx-2 hover:bg-muted/10 rounded transition-colors",children:[(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[(0,r.jsx)("div",{className:`h-10 w-10 rounded-full flex items-center justify-center border ${s.executed?"bg-emerald-500/10 text-emerald-500 border-emerald-500/20":"bg-orange-500/10 text-orange-500 border-orange-500/20"}`,children:s.executed?(0,r.jsx)(c.A,{className:"h-5 w-5"}):(0,r.jsx)(y.A,{className:"h-5 w-5"})}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("p",{className:"text-sm font-medium",children:["Tx #",s.id]}),(0,r.jsxs)("p",{className:"text-xs text-muted-foreground font-mono bg-muted/50 px-1 rounded w-fit mt-0.5",children:[s.to.slice(0,6),"...",s.to.slice(-4)]})]})]}),(0,r.jsxs)("div",{className:"text-right",children:[(0,r.jsxs)("p",{className:"text-sm font-bold",children:[em(s.value)," ",(0,r.jsx)("span",{className:"text-xs font-normal text-muted-foreground",children:s.isTokenTransfer?"Token":"CELO"})]}),(0,r.jsxs)("div",{className:"text-xs mt-1.5 flex items-center justify-end gap-2",children:[(0,r.jsxs)("span",{className:"text-[10px] text-muted-foreground uppercase tracking-wider",children:[s.confirmationCount," Signed"]}),(0,r.jsx)("div",{className:"w-16 h-1.5 bg-muted rounded-full overflow-hidden",children:(0,r.jsx)("div",{className:`h-full rounded-full ${s.executed?"bg-emerald-500":"bg-primary"}`,style:{width:`${a}%`}})})]})]})]},s.id)})})})]}),(0,r.jsx)(ed,{isOpen:i,onClose:()=>d(!1),controllerAddress:e.controller}),(0,r.jsx)(eh,{isOpen:o,onClose:()=>x(!1),multisig:e})]})}var eg=a(8579),ej=a(31514),ev=a(25793),eN=a(99899),ew=a(84982),ey=a(24014),ek=a(62157),eC=a(98736),eA=a(9025),eS=a(46592);function eE({className:e,...s}){return(0,r.jsx)(eS.bL,{"data-slot":"avatar",className:(0,b.cn)("relative flex size-8 shrink-0 overflow-hidden rounded-full",e),...s})}function eO({className:e,...s}){return(0,r.jsx)(eS.H4,{"data-slot":"avatar-fallback",className:(0,b.cn)("bg-muted flex size-full items-center justify-center rounded-full",e),...s})}var eT=a(38410);function e_({isOpen:e,transaction:s,controllerAddress:a,owners:n=[],onClose:l}){let{wallets:i}=(0,I.u)(),d=i[0]?.address?.toLowerCase(),[o,c]=(0,t.useState)(!1),[x,u]=(0,t.useState)(!1),[p,b]=(0,t.useState)([]),[f,g]=(0,t.useState)(!1),[j,v]=(0,t.useState)({isOpen:!1,type:null,title:"",description:""}),w=e=>{if(!e)return{name:"Unknown",percentage:0,isOwner:!1};let s=n.find(s=>s.address.toLowerCase()===e.toLowerCase());return{name:s?s.name:"Unknown (Non-Owner)",percentage:s?Number(s.percentage):0,isOwner:!!s}};if((0,t.useEffect)(()=>{let r=async()=>{if(s&&a)try{g(!0);let e=await (0,es.vl)(a,eT.P5),r=e.filters.TransactionConfirmed(s.id),t=e.filters.TransactionRevoked(s.id),[n,l]=await Promise.all([e.queryFilter(r),e.queryFilter(t)]),i=[...n.map(e=>({type:"confirm",owner:e.args[1],block:e.blockNumber,idx:e.index})),...l.map(e=>({type:"revoke",owner:e.args[1],block:e.blockNumber,idx:e.index}))].sort((e,s)=>e.block-s.block||e.idx-s.idx),d=new Set;i.forEach(e=>{"confirm"===e.type&&d.add(e.owner.toLowerCase()),"revoke"===e.type&&d.delete(e.owner.toLowerCase())}),b(Array.from(d))}catch(e){console.error("Failed to fetch signers",e)}finally{g(!1)}};e&&r()},[e,s,a]),!e||!s)return null;let k=p.includes(d||""),C=w(s.initiator),A=e=>{navigator.clipboard.writeText(e),u(!0),setTimeout(()=>u(!1),1e3)},E=async e=>{c(!0);try{let r;"confirm"===e&&(r=await (0,es.n5)(a,s.id)),"revoke"===e&&(r=await (0,es.ez)(a,s.id)),"execute"===e&&(r=await (0,es.IS)(a,s.id)),v({isOpen:!0,type:"success",title:"confirm"===e?"Confirmed!":"execute"===e?"Executed!":"Revoked!",description:`Transaction #${s.id} processed successfully.`,txHash:r?.hash})}catch(e){v({isOpen:!0,type:"error",title:"Transaction Failed",description:e.message||"Something went wrong."})}finally{c(!1)}};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"fixed inset-0 z-50 bg-black/60 backdrop-blur-sm flex items-center justify-center p-4 animate-in fade-in duration-200",children:(0,r.jsxs)(N.Zp,{className:"w-full max-w-lg border-border bg-card max-h-[90vh] flex flex-col shadow-2xl",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-border shrink-0",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"flex items-center gap-3 mb-1",children:[(0,r.jsxs)("h2",{className:"text-xl font-bold",children:["Transaction #",s.id]}),(0,r.jsx)(eg.E,{variant:s.executed?"default":"secondary",className:s.executed?"bg-emerald-500":"bg-orange-500/10 text-orange-500",children:s.executed?"Executed":"Pending"})]}),(0,r.jsxs)("p",{className:"text-xs text-muted-foreground flex items-center gap-1",children:[(0,r.jsx)(y.A,{className:"h-3 w-3"}),"Created ",new Date(1e3*Number(s.timestamp)).toLocaleString()]})]}),(0,r.jsx)("button",{onClick:l,className:"p-2 hover:bg-muted rounded-full transition-colors",children:(0,r.jsx)(S.A,{className:"h-5 w-5"})})]}),(0,r.jsx)(eA.F,{className:"flex-1",children:(0,r.jsxs)(N.Wu,{className:"p-6 space-y-6",children:[(0,r.jsxs)("div",{className:"bg-muted/30 rounded-lg p-4 border border-border/50",children:[(0,r.jsxs)("p",{className:"text-xs text-muted-foreground uppercase tracking-wider mb-3 font-semibold flex items-center gap-1.5",children:[(0,r.jsx)(ew.A,{className:"h-3.5 w-3.5"})," Initiated By"]}),(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)(eE,{className:"h-10 w-10 border-2 border-background shadow-sm",children:(0,r.jsx)(eO,{className:"bg-primary/10 text-primary font-bold",children:C.name.substring(0,2).toUpperCase()})}),(0,r.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("p",{className:"font-semibold text-sm truncate",children:C.name}),C.isOwner&&(0,r.jsxs)(eg.E,{variant:"outline",className:"text-[10px] h-4 px-1 text-emerald-600 border-emerald-200 bg-emerald-50",children:[C.percentage,"% Equity"]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-1.5 text-xs text-muted-foreground mt-0.5",children:[(0,r.jsxs)("code",{className:"font-mono bg-background px-1 py-0.5 rounded border",children:[s.initiator.slice(0,6),"...",s.initiator.slice(-4)]}),(0,r.jsx)("button",{onClick:()=>A(s.initiator),className:"hover:text-primary transition-colors",children:x?(0,r.jsx)(Y.A,{className:"h-3 w-3 text-emerald-500"}):(0,r.jsx)(m.A,{className:"h-3 w-3"})})]})]})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{className:"p-3 border rounded-lg bg-card shadow-sm",children:[(0,r.jsx)("p",{className:"text-xs text-muted-foreground mb-1",children:"Value"}),(0,r.jsxs)("p",{className:"font-bold text-sm",children:[em(s.value)," ETH"]})]}),(0,r.jsxs)("div",{className:"p-3 border rounded-lg bg-card shadow-sm",children:[(0,r.jsx)("p",{className:"text-xs text-muted-foreground mb-1",children:"Target"}),(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("code",{className:"text-sm font-mono truncate mr-2",children:[s.to.slice(0,8),"...",s.to.slice(-6)]}),(0,r.jsx)("button",{onClick:()=>A(s.to),children:(0,r.jsx)(m.A,{className:"h-3 w-3 text-muted-foreground"})})]})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,r.jsxs)("h3",{className:"text-sm font-semibold flex items-center gap-2",children:[(0,r.jsx)(ey.A,{className:"h-4 w-4 text-primary"}),"Confirmed By"]}),(0,r.jsx)("span",{className:"text-xs text-muted-foreground bg-muted px-2 py-0.5 rounded-full",children:f?"Loading...":`${p.length} / ${n.length}`})]}),f?(0,r.jsx)("div",{className:"flex justify-center py-4",children:(0,r.jsx)(D.A,{className:"h-5 w-5 animate-spin text-muted-foreground"})}):p.length>0?(0,r.jsx)("div",{className:"grid grid-cols-1 gap-2",children:p.map(e=>{let s=w(e);return(0,r.jsxs)("div",{className:"flex items-center justify-between p-2.5 rounded-md bg-muted/40 border border-transparent hover:border-border transition-colors group",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3 min-w-0",children:[(0,r.jsx)("div",{className:`h-2 w-2 rounded-full ${s.isOwner?"bg-emerald-500":"bg-gray-300"}`}),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"flex items-center gap-2",children:(0,r.jsx)("p",{className:"text-sm font-medium truncate leading-none",children:s.name})}),(0,r.jsxs)("p",{className:"text-[10px] text-muted-foreground font-mono mt-1",children:[e.slice(0,8),"...",e.slice(-6)]})]})]}),s.isOwner&&(0,r.jsxs)("div",{className:"flex items-center gap-1.5 bg-background border px-2 py-1 rounded text-xs font-mono text-muted-foreground shrink-0",children:[(0,r.jsx)(ek.A,{className:"h-3 w-3 text-primary"}),s.percentage,"%"]})]},e)})}):(0,r.jsxs)("div",{className:"text-center py-6 bg-muted/10 border border-dashed rounded-lg",children:[(0,r.jsx)(P.A,{className:"h-8 w-8 text-muted-foreground/30 mx-auto mb-2"}),(0,r.jsx)("p",{className:"text-xs text-muted-foreground",children:"No signatures collected yet."})]})]})]})}),!s.executed&&(0,r.jsxs)("div",{className:"p-4 border-t bg-muted/20 shrink-0 grid grid-cols-2 gap-3",children:[k?(0,r.jsxs)(h.$,{variant:"destructive",onClick:()=>E("revoke"),disabled:o,className:"bg-red-500/10 text-red-600 hover:bg-red-500/20 hover:text-red-700 border border-red-200/50 shadow-none",children:[o?(0,r.jsx)(D.A,{className:"h-4 w-4 animate-spin mr-2"}):(0,r.jsx)(eC.A,{className:"h-4 w-4 mr-2"}),"Revoke"]}):(0,r.jsxs)(h.$,{variant:"outline",onClick:()=>E("confirm"),disabled:o,className:"border-emerald-500/30 hover:bg-emerald-500/10 hover:text-emerald-600 text-emerald-600",children:[o?(0,r.jsx)(D.A,{className:"h-4 w-4 animate-spin mr-2"}):(0,r.jsx)(Y.A,{className:"h-4 w-4 mr-2"}),"Confirm"]}),(0,r.jsxs)(h.$,{onClick:()=>E("execute"),disabled:o,children:[(0,r.jsx)(eN.A,{className:"h-4 w-4 mr-2"})," Execute"]})]})]})}),(0,r.jsx)(Q,{isOpen:j.isOpen,onClose:()=>{v(e=>({...e,isOpen:!1})),"success"===j.type&&(l(),window.location.reload())},status:j.type,title:j.title,description:j.description,txHash:j.txHash})]})}function e$({multisig:e}){let[s,a]=(0,t.useState)("all"),[n,l]=(0,t.useState)(e.transactions||[]),[d,o]=(0,t.useState)(!1),[m,x]=(0,t.useState)(null),[u,p]=(0,t.useState)(Date.now()/1e3),[b,f]=(0,t.useState)(null),[g,j]=(0,t.useState)({isOpen:!1,type:null,title:"",description:""});(0,t.useEffect)(()=>{let e=setInterval(()=>p(Date.now()/1e3),1e3);return()=>clearInterval(e)},[]);let v=async()=>{o(!0);let s=[];try{for(let a=0;a<20;a++)try{let r=await (0,es.xw)(e.controller,a);if(r.initiator===en.j)break;s.push({id:a,...r,confirmations:[]})}catch(e){break}l(s.sort((e,s)=>s.id-e.id))}catch(e){console.error("Error fetching txs",e)}finally{o(!1)}};(0,t.useEffect)(()=>{0===n.length&&v()},[e.controller]);let k=e=>{if(e<=0)return"0s";let s=Math.floor(e/86400),a=Math.floor(e%86400/3600),r=Math.floor(e%3600/60),t=Math.floor(e%60);return s>0?`${s}d ${a}h`:a>0?`${a}h ${r}m`:`${r}m ${t}s`},C=async(s,a,r)=>{if(r.stopPropagation(),null===m){x(a);try{let r;"confirm"===s&&(r=await (0,es.n5)(e.controller,a)),"revoke"===s&&(r=await (0,es.ez)(e.controller,a)),"execute"===s&&(r=await (0,es.IS)(e.controller,a)),await v(),j({isOpen:!0,type:"success",title:"confirm"===s?"Confirmed!":"execute"===s?"Executed!":"Revoked!",description:`Transaction #${a} has been successfully ${s}ed.`,txHash:r?.hash})}catch(e){console.error(e),j({isOpen:!0,type:"error",title:"Action Failed",description:e.message||"Something went wrong. Please try again."})}finally{x(null)}}},A=n.filter(e=>"all"===s||("executed"===s?e.executed:"pending"!==s||!e.executed));return(0,r.jsxs)("div",{className:"space-y-6 animate-in fade-in slide-in-from-bottom-2 duration-500",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center bg-card p-2 rounded-lg border",children:[(0,r.jsx)("div",{className:"flex gap-3",children:(0,r.jsxs)(ee.l6,{value:s,onValueChange:a,children:[(0,r.jsx)(ee.bq,{className:"w-40 border-none shadow-none bg-transparent focus:ring-0",children:(0,r.jsx)(ee.yv,{placeholder:"Filter Status"})}),(0,r.jsxs)(ee.gC,{children:[(0,r.jsx)(ee.eb,{value:"all",children:"All Transactions"}),(0,r.jsx)(ee.eb,{value:"pending",children:"Pending"}),(0,r.jsx)(ee.eb,{value:"executed",children:"Executed"})]})]})}),(0,r.jsx)(h.$,{variant:"ghost",size:"icon",onClick:v,disabled:d,children:(0,r.jsx)(w.A,{className:`h-4 w-4 ${d?"animate-spin":""}`})})]}),(0,r.jsxs)("div",{className:"space-y-3",children:[0===A.length&&!d&&(0,r.jsxs)("div",{className:"text-center py-12 border-2 border-dashed rounded-xl bg-muted/10",children:[(0,r.jsx)(ej.A,{className:"h-8 w-8 mx-auto text-muted-foreground/50 mb-3"}),(0,r.jsx)("p",{className:"text-muted-foreground",children:"No transactions found."})]}),A.map(s=>{let a=Number(s.confirmationCount),t=a/e.owners.length*100,n=m===s.id,l=a>=e.config.requiredPercentage/100*e.owners.length,d=Number(s.timelockEnd),o=Number(s.timestamp)+Number(e.config.expiryPeriod)-u,x=!s.executed&&o<=0,p=!s.executed&&l&&d>0&&u<d,b=!s.executed&&l&&!p&&!x;return(0,r.jsx)(N.Zp,{className:`border-border bg-card transition-all cursor-pointer group shadow-sm hover:shadow-md ${x?"opacity-60 grayscale":""}`,onClick:()=>f(s),children:(0,r.jsx)(N.Wu,{className:"p-5",children:(0,r.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[(0,r.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,r.jsxs)("div",{className:"flex flex-wrap items-center gap-2 mb-2",children:[(0,r.jsxs)("span",{className:"text-xs font-bold bg-muted px-2 py-1 rounded text-foreground",children:["#",s.id]}),s.executed?(0,r.jsx)(eg.E,{className:"bg-emerald-500 hover:bg-emerald-600",children:"Executed"}):x?(0,r.jsxs)(eg.E,{variant:"destructive",className:"flex items-center gap-1",children:[(0,r.jsx)(i.A,{className:"h-3 w-3"})," Expired"]}):b?(0,r.jsx)(eg.E,{className:"bg-blue-500 hover:bg-blue-600 animate-pulse",children:"Ready to Execute"}):(0,r.jsx)(eg.E,{variant:"secondary",className:"bg-orange-500/10 text-orange-600 border-orange-200",children:"Pending"}),p&&(0,r.jsxs)(eg.E,{variant:"outline",className:"text-orange-500 border-orange-500 text-[10px] gap-1.5 h-6",children:[(0,r.jsx)(ev.A,{className:"h-3 w-3 animate-spin-slow"}),(0,r.jsxs)("span",{className:"font-mono",children:["Execute in ",k(d-u)]})]}),!s.executed&&!x&&(0,r.jsxs)(eg.E,{variant:"outline",className:"text-muted-foreground border-border text-[10px] gap-1.5 h-6",children:[(0,r.jsx)(y.A,{className:"h-3 w-3"}),(0,r.jsxs)("span",{className:"font-mono",children:["Expires in ",k(o)]})]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[(0,r.jsx)("span",{className:"text-muted-foreground w-12 text-xs uppercase tracking-wide",children:"To"}),(0,r.jsxs)("code",{className:"bg-muted/50 px-1.5 py-0.5 rounded text-xs font-mono",children:[s.to.slice(0,8),"...",s.to.slice(-6)]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2 text-sm mt-1",children:[(0,r.jsx)("span",{className:"text-muted-foreground w-12 text-xs uppercase tracking-wide",children:"Value"}),(0,r.jsxs)("p",{className:"text-sm font-semibold",children:[em(s.value)," ",(0,r.jsx)("span",{className:"text-xs font-normal text-muted-foreground",children:"ETH"})]})]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-6",children:[(0,r.jsxs)("div",{className:"text-right hidden sm:block min-w-75 ",children:[(0,r.jsx)("div",{className:"text-[10px] text-muted-foreground mb-1 uppercase tracking-wider",children:"Approvals"}),(0,r.jsxs)("div",{className:"flex items-center justify-end gap-2",children:[(0,r.jsxs)("span",{className:"font-bold text-sm",children:[a,"/",e.owners.length]}),(0,r.jsx)("div",{className:"w-16 h-1.5 bg-muted rounded-full overflow-hidden",children:(0,r.jsx)("div",{className:`h-full ${s.executed?"bg-emerald-500":"bg-primary"}`,style:{width:`${t}%`}})})]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",onClick:e=>e.stopPropagation(),children:[!s.executed&&!x&&(0,r.jsxs)(r.Fragment,{children:[!b&&!p&&(0,r.jsxs)(h.$,{size:"sm",variant:"outline",className:"h-8 px-3",onClick:e=>C("confirm",s.id,e),disabled:n,children:[n?(0,r.jsx)(D.A,{className:"h-3.5 w-3.5 animate-spin"}):(0,r.jsx)(c.A,{className:"h-3.5 w-3.5 mr-1.5"}),(0,r.jsx)("span",{className:"hidden sm:inline",children:"Confirm"})]}),b?(0,r.jsxs)(h.$,{size:"sm",className:"h-8 px-3 bg-primary hover:bg-primary/90 shadow-sm",onClick:e=>C("execute",s.id,e),disabled:n,children:[(0,r.jsx)(eN.A,{className:"h-3.5 w-3.5 mr-1.5"}),(0,r.jsx)("span",{className:"hidden sm:inline",children:"Execute"})]}):(0,r.jsx)(h.$,{size:"sm",variant:"ghost",className:"h-8 w-8 p-0 text-muted-foreground hover:text-destructive hover:bg-destructive/10",onClick:e=>C("revoke",s.id,e),disabled:n||0===a||p,title:"Revoke Confirmation",children:(0,r.jsx)(S.A,{className:"h-4 w-4"})})]}),(0,r.jsx)(h.$,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0 hidden md:flex opacity-50 group-hover:opacity-100",children:(0,r.jsx)(z.A,{className:"h-4 w-4"})})]})]})]})})},s.id)})]}),(0,r.jsx)(Q,{isOpen:g.isOpen,onClose:()=>j(e=>({...e,isOpen:!1})),status:g.type,title:g.title,description:g.description,txHash:g.txHash}),b&&(0,r.jsx)(e_,{isOpen:!!b,transaction:b,controllerAddress:e.controller,owners:e.owners,onClose:()=>f(null)})]})}function eF({multisig:e}){let[s,a]=(0,t.useState)([]),[n,l]=(0,t.useState)(!0),[i,d]=(0,t.useState)(!1),[o,x]=(0,t.useState)(null),p=async()=>{try{l(!0);let s=await (0,es.rf)(e.controller);console.log("Raw Owner Data:",s);let r=[];if(Array.isArray(s)&&s.length>0&&s[0].address)r=s.map(e=>({address:e.address,name:e.name,percentage:Number(e.percentage),removable:e.removable}));else{let e=s.addrs||s[0]||[],a=s.ownerNames||s.names||s[1]||[],t=s.percentages||s[2]||[],n=s.removable||s.removables||s[3]||[];Array.isArray(e)&&(r=e.map((e,s)=>({address:e,name:a[s]||`Owner ${s+1}`,percentage:Number(t[s]),removable:n[s]})))}a(r)}catch(e){console.error("Failed to load owners",e)}finally{l(!1)}};(0,t.useEffect)(()=>{p()},[e.controller]);let b=s.reduce((e,s)=>e+Number(s.percentage),0);return n?(0,r.jsxs)("div",{className:"flex flex-col items-center justify-center py-12 space-y-4",children:[(0,r.jsx)(D.A,{className:"h-8 w-8 animate-spin text-primary"}),(0,r.jsx)("p",{className:"text-muted-foreground text-sm",children:"Syncing owner list..."})]}):(0,r.jsxs)("div",{className:"space-y-6 animate-in fade-in slide-in-from-bottom-2 duration-500",children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[(0,r.jsx)(N.Zp,{className:"bg-card border shadow-sm",children:(0,r.jsxs)(N.Wu,{className:"p-6 flex items-center gap-4",children:[(0,r.jsx)("div",{className:"bg-primary/10 p-3 rounded-full",children:(0,r.jsx)(ew.A,{className:"h-6 w-6 text-primary"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-2xl font-bold",children:s.length}),(0,r.jsx)("p",{className:"text-sm text-muted-foreground font-medium",children:"Active Owners"})]})]})}),(0,r.jsx)(N.Zp,{className:"bg-card border shadow-sm",children:(0,r.jsxs)(N.Wu,{className:"p-6 flex items-center gap-4",children:[(0,r.jsx)("div",{className:"bg-emerald-500/10 p-3 rounded-full",children:(0,r.jsx)(ek.A,{className:"h-6 w-6 text-emerald-600"})}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("p",{className:"text-2xl font-bold",children:[b,"%"]}),(0,r.jsx)("p",{className:"text-sm text-muted-foreground font-medium",children:"Total Equity Distributed"})]})]})})]}),(0,r.jsxs)(N.Zp,{className:"border-border bg-card",children:[(0,r.jsxs)(N.aR,{className:"flex flex-row items-center justify-between pb-2",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(N.ZB,{children:"Owner List"}),(0,r.jsx)(N.BT,{className:"mt-1",children:"Manage signers and their voting power distribution."})]}),(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsx)(h.$,{variant:"ghost",size:"icon",onClick:p,title:"Refresh List",children:(0,r.jsx)(w.A,{className:"h-4 w-4"})}),(0,r.jsxs)(h.$,{onClick:()=>d(!0),size:"sm",className:"h-9 shadow-sm",children:[(0,r.jsx)(u.A,{className:"h-4 w-4 mr-2"}),"Add Owner"]})]})]}),(0,r.jsx)(N.Wu,{children:(0,r.jsx)("div",{className:"space-y-3",children:0===s.length?(0,r.jsx)("div",{className:"text-center py-8 text-muted-foreground",children:"No owners found."}):s.map((e,s)=>(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between p-4 bg-muted/20 border border-transparent hover:border-border hover:bg-muted/40 transition-all rounded-xl gap-4 group",children:[(0,r.jsxs)("div",{className:"flex items-center gap-4 min-w-0",children:[(0,r.jsx)(eE,{className:"h-10 w-10 border-2 border-background shadow-sm",children:(0,r.jsx)(eO,{className:"bg-linear-to-br from-primary to-indigo-600 text-white font-bold text-sm",children:e.name.substring(0,2).toUpperCase()})}),(0,r.jsxs)("div",{className:"min-w-0 space-y-1",children:[(0,r.jsx)("p",{className:"font-semibold text-sm truncate",children:e.name}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsxs)("code",{className:"text-xs text-muted-foreground font-mono bg-background px-1.5 py-0.5 rounded border",children:[e.address.slice(0,6),"...",e.address.slice(-4)]}),(0,r.jsx)("button",{onClick:()=>{var s;return s=e.address,void(navigator.clipboard.writeText(s),x(s),setTimeout(()=>x(null),1e3))},className:"text-muted-foreground hover:text-primary transition-colors opacity-0 group-hover:opacity-100",title:"Copy Address",children:o===e.address?(0,r.jsx)(c.A,{className:"h-3 w-3 text-emerald-500"}):(0,r.jsx)(m.A,{className:"h-3 w-3"})})]})]})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between sm:justify-end gap-6 w-full sm:w-auto mt-2 sm:mt-0 pt-2 sm:pt-0 border-t sm:border-t-0 border-border/50",children:[(0,r.jsxs)("div",{className:"text-right",children:[(0,r.jsxs)("p",{className:"font-bold text-xl tabular-nums",children:[e.percentage,"%"]}),(0,r.jsx)("p",{className:"text-[10px] text-muted-foreground uppercase tracking-wider font-semibold",children:"Voting Power"})]}),(0,r.jsx)("div",{className:"flex items-center gap-2 pl-4 border-l border-border/50 h-10",children:e.removable?(0,r.jsx)(h.$,{variant:"ghost",size:"icon",className:"text-muted-foreground hover:text-destructive hover:bg-destructive/10 h-8 w-8 transition-colors",title:"Remove Owner",onClick:()=>alert("To remove this owner, create a transaction proposing their removal."),children:(0,r.jsx)($.A,{className:"h-4 w-4"})}):(0,r.jsx)(eg.E,{variant:"outline",className:"text-[10px] h-6 bg-muted/50 text-muted-foreground border-transparent",children:"Immutable"})})]})]},`${e.address}-${s}`))})})]}),(0,r.jsx)(ed,{isOpen:i,onClose:()=>d(!1),controllerAddress:e.controller,defaultTab:"owner"})]})}var ez=a(58336),eP=a(57931),eD=a(45498),eI=a(62754),eL=a(68643);let eR=[{label:"Minutes",value:60},{label:"Hours",value:3600},{label:"Days",value:86400}];function eM({isOpen:e,onClose:s,type:a,controllerAddress:n,currentValue:l}){let[i,d]=(0,t.useState)(""),[o,c]=(0,t.useState)("3600"),[m,x]=(0,t.useState)(!1),[u,p]=(0,t.useState)(null),[b,f]=(0,t.useState)({isOpen:!1,type:null,title:"",description:""});if((0,t.useEffect)(()=>{e&&(d(""),p(null))},[e,a]),!e||!a)return null;let g=async()=>{p(null),x(!0);try{let e,s=Number(i);if(isNaN(s)||s<0)throw Error("Invalid number");if("percentage"===a){if(s>100)throw Error("Percentage cannot exceed 100");e=await (0,es.jo)(n,s)}else if("minOwners"===a){if(s<1)throw Error("Minimum owners must be at least 1");e=await (0,es.fQ)(n,s)}else if("timelock"===a){let a=s*Number(o);e=await (0,es.z)(n,a)}else if("expiry"===a){let a=s*Number(o);e=await (0,es.Kn)(n,a)}f({isOpen:!0,type:"success",title:"PROPOSAL SUBMITTED",description:"Governance change initialized.",txHash:e?.hash})}catch(e){p(e.message||"Transaction failed")}finally{x(!1)}},j="timelock"===a||"expiry"===a;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"fixed inset-0 z-50 bg-black/80 backdrop-blur-sm flex items-center justify-center p-4 animate-in fade-in",children:(0,r.jsxs)(N.Zp,{className:"w-full max-w-md border-2 border-black dark:border-white bg-white dark:bg-[#080808] shadow-[8px_8px_0px_0px_rgba(0,0,0,1)] dark:shadow-[8px_8px_0px_0px_rgba(255,255,255,1)] rounded-none",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between p-6 border-b-2 border-black dark:border-white",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)("div",{className:"bg-black dark:bg-white text-white dark:text-black p-1",children:(0,r.jsx)(eL.A,{className:"h-5 w-5"})}),(0,r.jsx)("h2",{className:"text-xl font-black italic uppercase tracking-tighter",children:(()=>{switch(a){case"percentage":return"MODIFY THRESHOLD";case"timelock":return"MODIFY TIMELOCK";case"expiry":return"MODIFY EXPIRY";case"minOwners":return"MODIFY MIN OWNERS";default:return"GOVERNANCE CHANGE"}})()})]}),(0,r.jsx)("button",{onClick:s,className:"border-2 border-transparent hover:border-black dark:hover:border-white p-1 transition-all",children:(0,r.jsx)(S.A,{className:"h-6 w-6"})})]}),(0,r.jsxs)(N.Wu,{className:"p-6 space-y-8",children:[(0,r.jsxs)("div",{className:"border-l-4 border-black dark:border-white pl-4 py-1",children:[(0,r.jsx)("p",{className:"font-bold uppercase text-xs opacity-60 mb-1",children:"Objective"}),(0,r.jsx)("p",{className:"text-sm font-medium",children:(()=>{switch(a){case"percentage":return"New required voting power % to pass proposals.";case"timelock":return"New mandatory delay period before execution.";case"expiry":return"New validity duration for pending proposals.";case"minOwners":return"New absolute minimum number of signers.";default:return""}})()})]}),void 0!==l&&(0,r.jsxs)("div",{className:"flex justify-between items-center p-3 border-2 border-black/10 dark:border-white/10",children:[(0,r.jsx)("span",{className:"text-xs font-black uppercase opacity-50",children:"Current Setting"}),(0,r.jsx)("span",{className:"font-mono font-bold text-lg",children:l})]}),(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsx)(M.J,{className:"font-black uppercase text-xs",children:"New Parameter Value"}),(0,r.jsxs)("div",{className:"flex gap-0",children:[(0,r.jsx)("div",{className:"relative flex-1",children:(0,r.jsx)(R.p,{type:"number",placeholder:"VALUE",value:i,onChange:e=>d(e.target.value),className:`h-12 rounded-none border-2 border-black dark:border-white text-lg font-mono placeholder:text-muted-foreground/30 focus-visible:ring-0 ${j?"border-r-0":""}`})}),j&&(0,r.jsxs)(ee.l6,{value:o,onValueChange:c,children:[(0,r.jsx)(ee.bq,{className:"w-32 h-12 rounded-none border-2 border-black dark:border-white font-bold uppercase bg-muted/10",children:(0,r.jsx)(ee.yv,{})}),(0,r.jsx)(ee.gC,{className:"rounded-none border-2 border-black dark:border-white",children:eR.map(e=>(0,r.jsx)(ee.eb,{value:e.value.toString(),className:"font-mono text-xs uppercase",children:e.label},e.value))})]})]})]}),u&&(0,r.jsxs)("div",{className:"p-4 border-2 border-red-500 bg-red-500/10 text-red-600 font-bold text-xs uppercase flex items-start gap-2",children:[(0,r.jsx)(P.A,{className:"h-4 w-4 shrink-0 mt-0.5"}),(0,r.jsx)("span",{children:u})]}),(0,r.jsxs)("div",{className:"flex gap-4 pt-4",children:[(0,r.jsx)(h.$,{variant:"outline",className:"flex-1 h-12 rounded-none border-2 border-black dark:border-white font-bold uppercase hover:bg-black hover:text-white dark:hover:bg-white dark:hover:text-black",onClick:s,disabled:m,children:"Cancel"}),(0,r.jsxs)(h.$,{className:"flex-1 h-12 rounded-none border-2 border-black dark:border-white font-black uppercase italic shadow-[4px_4px_0px_0px_rgba(0,0,0,1)] dark:shadow-[4px_4px_0px_0px_rgba(255,255,255,1)] hover:translate-x-0.5 hover:translate-y-0.5 hover:shadow-none transition-all",onClick:g,disabled:m||!i,children:[m?(0,r.jsx)(D.A,{className:"h-4 w-4 animate-spin"}):(0,r.jsx)(k.A,{className:"h-4 w-4 mr-2"}),"Submit Proposal"]})]})]})]})}),(0,r.jsx)(Q,{isOpen:b.isOpen,onClose:()=>{f(e=>({...e,isOpen:!1})),"success"===b.type&&s()},status:b.type,title:b.title,description:b.description,txHash:b.txHash})]})}function eH({multisig:e}){let[s,a]=(0,t.useState)(!1),[n,l]=(0,t.useState)(null),[i,d]=(0,t.useState)(""),o=e=>{if(0===e)return"0 Minutes";let s=Math.floor(e/86400),a=Math.floor(e%86400/3600),r=Math.floor(e%3600/60),t=[];return s>0&&t.push(`${s}d`),a>0&&t.push(`${a}h`),r>0&&t.push(`${r}m`),t.join(" ")||`${e}s`},c=async()=>{a(!0);try{e.config.paused?await (0,es.gs)(e.controller):await (0,es.rm)(e.controller),window.location.reload()}catch(e){console.error(e),alert("Error: "+(e.message||"Failed to toggle pause state"))}finally{a(!1)}},m=(e,s)=>{l(e),d(s)};return(0,r.jsxs)("div",{className:"space-y-8 animate-in fade-in slide-in-from-bottom-2 duration-500",children:[(0,r.jsxs)(N.Zp,{className:"border-border bg-card",children:[(0,r.jsxs)(N.aR,{children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(ez.A,{className:"h-5 w-5 text-primary"}),(0,r.jsx)(N.ZB,{children:"Governance Parameters"})]}),(0,r.jsx)(N.BT,{children:"Configure operational rules. Changes require a proposal and vote."})]}),(0,r.jsxs)(N.Wu,{className:"divide-y divide-border/50",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between py-4 first:pt-0",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"font-medium text-sm",children:"Required Approval"}),(0,r.jsx)("p",{className:"text-xs text-muted-foreground",children:"Percentage of total voting power needed to pass."})]}),(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsxs)("span",{className:"font-mono font-bold bg-muted px-2 py-1 rounded",children:[e.config.requiredPercentage,"%"]}),(0,r.jsx)(h.$,{variant:"outline",size:"sm",onClick:()=>m("percentage",e.config.requiredPercentage),children:"Edit"})]})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between py-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"font-medium text-sm",children:"Timelock Period"}),(0,r.jsx)("p",{className:"text-xs text-muted-foreground",children:"Mandatory delay between approval and execution."})]}),(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)("span",{className:"font-mono font-bold bg-muted px-2 py-1 rounded",children:o(Number(e.config.timelockPeriod))}),(0,r.jsx)(h.$,{variant:"outline",size:"sm",onClick:()=>m("timelock",Number(e.config.timelockPeriod)),children:"Edit"})]})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between py-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"font-medium text-sm",children:"Proposal Expiry"}),(0,r.jsx)("p",{className:"text-xs text-muted-foreground",children:"Time window before an unexecuted proposal expires."})]}),(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)("span",{className:"font-mono font-bold bg-muted px-2 py-1 rounded",children:o(Number(e.config.expiryPeriod))}),(0,r.jsx)(h.$,{variant:"outline",size:"sm",onClick:()=>m("expiry",Number(e.config.expiryPeriod)),children:"Edit"})]})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between py-4 last:pb-0",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"font-medium text-sm",children:"Minimum Signers"}),(0,r.jsx)("p",{className:"text-xs text-muted-foreground",children:"Absolute floor for owner count (safety check)."})]}),(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsxs)("span",{className:"font-mono font-bold bg-muted px-2 py-1 rounded",children:[e.config.minOwners," Owners"]}),(0,r.jsx)(h.$,{variant:"outline",size:"sm",onClick:()=>m("minOwners",e.config.minOwners),children:"Edit"})]})]})]})]}),(0,r.jsxs)(N.Zp,{className:`border-2 ${e.config.paused?"border-emerald-500 bg-emerald-500/5":"border-destructive/30 bg-destructive/5"}`,children:[(0,r.jsx)(N.aR,{children:(0,r.jsxs)(N.ZB,{className:"flex items-center gap-2 text-foreground",children:[(0,r.jsx)(eP.A,{className:`h-5 w-5 ${e.config.paused?"text-emerald-600":"text-destructive"}`}),"Emergency Controls"]})}),(0,r.jsx)(N.Wu,{children:(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("p",{className:"font-medium text-sm flex items-center gap-2",children:["Contract Status:",(0,r.jsx)("span",{className:`uppercase font-bold text-xs px-2 py-0.5 rounded ${e.config.paused?"bg-emerald-200 text-emerald-800":"bg-green-100 text-green-700"}`,children:e.config.paused?"Paused":"Active"})]}),(0,r.jsx)("p",{className:"text-xs text-muted-foreground max-w-md mt-1",children:e.config.paused?"Contract is currently paused. Only owners can unpause to resume operations.":"Pausing prevents all transactions. Use this if you suspect a compromise."})]}),(0,r.jsx)(h.$,{variant:e.config.paused?"default":"destructive",onClick:c,disabled:s,className:e.config.paused?"bg-emerald-600 hover:bg-emerald-700":"",children:s?(0,r.jsx)(D.A,{className:"h-4 w-4 animate-spin"}):(0,r.jsxs)(r.Fragment,{children:[e.config.paused?(0,r.jsx)(eD.A,{className:"h-4 w-4 mr-2"}):(0,r.jsx)(eI.A,{className:"h-4 w-4 mr-2"}),e.config.paused?"Unpause Contract":"Pause Contract"]})})]})})]}),n&&(0,r.jsx)(eM,{isOpen:!!n,onClose:()=>l(null),type:n,controllerAddress:e.controller,currentValue:i})]})}function eB({multisig:e}){let[s,a]=(0,t.useState)("overview");return(0,r.jsxs)(f,{value:s,onValueChange:a,className:"w-full",children:[(0,r.jsxs)(g,{className:"grid w-full grid-cols-4 bg-muted",children:[(0,r.jsx)(j,{value:"overview",children:"Overview"}),(0,r.jsx)(j,{value:"transactions",children:"Transactions"}),(0,r.jsx)(j,{value:"owners",children:"Owners"}),(0,r.jsx)(j,{value:"settings",children:"Settings"})]}),(0,r.jsx)(v,{value:"overview",className:"space-y-6",children:(0,r.jsx)(ef,{multisig:e})}),(0,r.jsx)(v,{value:"transactions",className:"space-y-6",children:(0,r.jsx)(e$,{multisig:e})}),(0,r.jsx)(v,{value:"owners",className:"space-y-6",children:(0,r.jsx)(eF,{multisig:e})}),(0,r.jsx)(v,{value:"settings",className:"space-y-6",children:(0,r.jsx)(eH,{multisig:e})})]})}var eq=a(88836),eU=a(29379),eW=a.n(eU),eZ=a(19148);function eV({isOpen:e,onClose:s,multisig:a}){let[n,l]=(0,t.useState)([]),[i,d]=(0,t.useState)(!1),[o,c]=(0,t.useState)(null),[m,u]=(0,t.useState)({isOpen:!1,type:null,title:"",description:""});if(!e)return null;let p=a.transactions.filter(e=>!e.executed),b=()=>{l(n.length===p.length?[]:p.map(e=>e.id))},f=async()=>{c(null),d(!0);try{let e=await (0,es.MG)(a.controller,n);u({isOpen:!0,type:"success",title:"BATCH CONFIRMED",description:`Successfully signed ${n.length} transactions.`,txHash:e?.hash})}catch(e){console.error(e),c(e.message||"Batch confirm failed")}finally{d(!1)}};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"fixed inset-0 z-50 bg-black/80 backdrop-blur-sm flex items-center justify-center p-4 animate-in fade-in",children:(0,r.jsxs)(N.Zp,{className:"w-full max-w-md border-2 border-black dark:border-white bg-white dark:bg-[#080808] shadow-[8px_8px_0px_0px_rgba(0,0,0,1)] dark:shadow-[8px_8px_0px_0px_rgba(255,255,255,1)] rounded-none",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between p-6 border-b-2 border-black dark:border-white",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)("div",{className:"bg-black dark:bg-white text-white dark:text-black p-1",children:(0,r.jsx)(x.A,{className:"h-5 w-5"})}),(0,r.jsx)("h2",{className:"text-xl font-black italic uppercase tracking-tighter",children:"Batch Operation"})]}),(0,r.jsx)("button",{onClick:s,className:"border-2 border-transparent hover:border-black dark:hover:border-white p-1 transition-all",children:(0,r.jsx)(S.A,{className:"h-6 w-6"})})]}),(0,r.jsxs)(N.Wu,{className:"p-6 space-y-6",children:[0===p.length?(0,r.jsx)("div",{className:"text-center py-8 border-2 border-dashed border-black/20 dark:border-white/20",children:(0,r.jsx)("p",{className:"font-bold uppercase opacity-50",children:"No pending transactions"})}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"flex items-center gap-3 p-3 bg-black/5 dark:bg-white/5 border-2 border-black dark:border-white",children:[(0,r.jsx)(B.S,{checked:n.length===p.length&&p.length>0,onCheckedChange:b,className:"rounded-none h-5 w-5 border-2 border-black dark:border-white data-[state=checked]:bg-black dark:data-[state=checked]:bg-white data-[state=checked]:text-white dark:data-[state=checked]:text-black"}),(0,r.jsxs)("label",{className:"text-xs font-black uppercase tracking-wider flex-1 cursor-pointer",onClick:b,children:["Select All (",n.length,"/",p.length,")"]})]}),(0,r.jsx)("div",{className:"space-y-3 max-h-60 overflow-y-auto pr-2",children:p.map(e=>(0,r.jsxs)("div",{className:`flex items-center gap-3 p-3 border-2 transition-all ${n.includes(e.id)?"border-black dark:border-white bg-primary/10":"border-transparent hover:border-black/20 dark:hover:border-white/20 bg-muted/20"}`,children:[(0,r.jsx)(B.S,{checked:n.includes(e.id),onCheckedChange:()=>{var s;return s=e.id,void l(e=>e.includes(s)?e.filter(e=>e!==s):[...e,s])},className:"rounded-none border-2 border-black dark:border-white"}),(0,r.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,r.jsxs)("p",{className:"text-sm font-black uppercase",children:["Tx #",e.id]}),(0,r.jsxs)("p",{className:"text-[10px] font-mono opacity-60 truncate",children:["To: ",e.to]})]}),(0,r.jsx)("div",{className:"text-right",children:(0,r.jsxs)("p",{className:"text-sm font-bold font-mono",children:[em(e.value)," ETH"]})})]},e.id))})]}),o&&(0,r.jsxs)("div",{className:"p-4 border-2 border-red-500 bg-red-500/10 text-red-600 font-bold text-xs uppercase flex items-start gap-2",children:[(0,r.jsx)(P.A,{className:"h-4 w-4 shrink-0 mt-0.5"}),(0,r.jsx)("span",{children:o})]}),(0,r.jsxs)("div",{className:"flex gap-4 pt-4 border-t-2 border-black dark:border-white",children:[(0,r.jsx)(h.$,{variant:"outline",className:"flex-1 h-12 rounded-none border-2 border-black dark:border-white font-bold uppercase hover:bg-black hover:text-white dark:hover:bg-white dark:hover:text-black",onClick:s,disabled:i,children:"Cancel"}),(0,r.jsxs)(h.$,{className:"flex-1 h-12 rounded-none border-2 border-black dark:border-white font-black uppercase italic shadow-[4px_4px_0px_0px_rgba(0,0,0,1)] dark:shadow-[4px_4px_0px_0px_rgba(255,255,255,1)] hover:translate-x-0.5 hover:translate-y-0.5 hover:shadow-none transition-all",disabled:0===n.length||i,onClick:f,children:[i?(0,r.jsx)(D.A,{className:"h-4 w-4 animate-spin"}):(0,r.jsx)(eZ.A,{className:"h-4 w-4 mr-2"}),"Confirm (",n.length,")"]})]})]})]})}),(0,r.jsx)(Q,{isOpen:m.isOpen,onClose:()=>{u(e=>({...e,isOpen:!1})),"success"===m.type&&s()},status:m.type,title:m.title,description:m.description,txHash:m.txHash})]})}function eJ(){let e=(0,n.useParams)().id,{ready:s,authenticated:a,login:p}=(0,eq.u)(),{wallets:f}=(0,I.u)(),[g,j]=(0,t.useState)(null),[v,N]=(0,t.useState)(!0),[w,y]=(0,t.useState)(null),[k,C]=(0,t.useState)(null),[A,S]=(0,t.useState)(!1),[E,O]=(0,t.useState)(!1),T=(e,s)=>{navigator.clipboard.writeText(e),C(s),setTimeout(()=>C(null),2e3)};return((0,t.useEffect)(()=>{let r=async()=>{if(s&&a&&f&&f.length>0)try{N(!0),y(null),await (0,es.k_)(f[0]);let s=await (0,es.rB)(e),[a,r,t]=await Promise.all([(0,es.rf)(e),(0,es.ZR)(e),(0,es.mX)(s)]),n=[];for(let s=0;s<20;s++)try{let a=await (0,es.xw)(e,s);if("0x0000000000000000000000000000000000000000"!==a.initiator)n.push({id:s,...a,confirmations:[]});else break}catch(e){break}let l=a?.addresses||[],i=a?.names||[],d=a?.percentages||[],o=a?.removables||[],c=l.map((e,s)=>({address:e,name:i[s]||`Owner ${s+1}`,percentage:Number(d[s]),removable:o[s]||!1})),m={controller:e,wallet:s,name:r.name||"Unnamed Treasury",owners:c,config:{...r,requiredPercentage:Number(r.requiredPercentage),timelockPeriod:Number(r.timelockPeriod),expiryPeriod:Number(r.expiryPeriod),minOwners:Number(r.minOwners)},balance:t,transactions:n.sort((e,s)=>s.id-e.id),deployed:Date.now()};j(m)}catch(e){console.error("Error loading multisig:",e),y(e.message||"Failed to load multisig details")}finally{N(!1)}};e&&s&&r()},[e,s,a,f]),s&&!a)?(0,r.jsx)("div",{className:"min-h-screen flex items-center justify-center p-6 bg-white dark:bg-[#080808]",children:(0,r.jsxs)("div",{className:"max-w-md w-full text-center border-2 border-black dark:border-white p-12 shadow-[8px_8px_0px_0px_rgba(0,0,0,1)] dark:shadow-[8px_8px_0px_0px_rgba(255,255,255,1)]",children:[(0,r.jsx)(l.A,{className:"h-16 w-16 mx-auto mb-6 text-black dark:text-white"}),(0,r.jsx)("h2",{className:"text-2xl font-black italic uppercase mb-4",children:"Access Denied"}),(0,r.jsx)(h.$,{onClick:p,size:"lg",className:"w-full rounded-none border-2 border-black dark:border-white font-bold uppercase hover:translate-x-0.5 hover:translate-y-0.5 hover:shadow-none transition-all shadow-[4px_4px_0px_0px_rgba(0,0,0,1)] dark:shadow-[4px_4px_0px_0px_rgba(255,255,255,1)]",children:"Connect Wallet"})]})}):v||!s?(0,r.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-white dark:bg-[#080808]",children:(0,r.jsxs)("div",{className:"flex flex-col items-center",children:[(0,r.jsx)("div",{className:"h-16 w-16 border-4 border-black dark:border-white border-t-transparent animate-spin rounded-full mb-6"}),(0,r.jsx)("p",{className:"font-black italic uppercase tracking-widest text-xl animate-pulse",children:"Initializing System..."})]})}):w||!g?(0,r.jsx)("div",{className:"min-h-screen p-8 flex flex-col items-center justify-center bg-white dark:bg-[#080808]",children:(0,r.jsxs)("div",{className:"max-w-md w-full border-2 border-red-500 bg-red-500/5 p-8 text-center shadow-[8px_8px_0px_0px_rgba(239,68,68,1)]",children:[(0,r.jsx)(i.A,{className:"h-12 w-12 mx-auto mb-4 text-red-500"}),(0,r.jsx)("p",{className:"text-red-600 font-black uppercase text-xl mb-2",children:"System Error"}),(0,r.jsx)("p",{className:"font-mono text-sm text-red-500/80 mb-6",children:w}),(0,r.jsx)(eW(),{href:"/multisigs",children:(0,r.jsx)(h.$,{variant:"outline",className:"border-2 border-red-500 text-red-500 hover:bg-red-500 hover:text-white rounded-none font-bold uppercase",children:"Return to Base"})})]})}):(0,r.jsxs)("div",{className:"min-h-screen p-4 md:p-8 bg-white dark:bg-[#080808] text-black dark:text-white",children:[(0,r.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,r.jsx)(eW(),{href:"/multisigs",className:"inline-block mb-8",children:(0,r.jsxs)(h.$,{variant:"ghost",size:"sm",className:"rounded-none border-2 border-transparent hover:border-black dark:hover:border-white font-bold uppercase tracking-wider pl-2 pr-4",children:[(0,r.jsx)(d.A,{className:"h-5 w-5 mr-2"}),"Dashboard"]})}),(0,r.jsxs)("div",{className:"flex flex-col xl:flex-row xl:items-end xl:justify-between gap-8 border-b-2 border-black dark:border-white pb-8 mb-12",children:[(0,r.jsxs)("div",{className:"space-y-6 flex-1",children:[(0,r.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center gap-4",children:[(0,r.jsx)("h1",{className:"text-4xl md:text-6xl font-black italic uppercase tracking-tighter",children:g.name}),(0,r.jsx)("div",{className:(0,b.cn)("px-4 py-1 border-2 text-sm font-black uppercase tracking-widest w-fit",g.config.paused?"border-red-500 text-red-500 bg-red-500/10":"border-emerald-500 text-emerald-500 bg-emerald-500/10"),children:g.config.paused?"System Halted":"Operational"})]}),(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4",children:[(0,r.jsxs)("div",{className:"group flex items-center gap-3 border-2 border-black dark:border-white p-3 bg-muted/10 hover:bg-primary/5 transition-colors cursor-pointer",onClick:()=>T(g.controller,"controller"),children:[(0,r.jsx)("div",{className:"bg-black dark:bg-white text-white dark:text-black p-1",children:(0,r.jsx)(o.A,{className:"h-4 w-4"})}),(0,r.jsxs)("div",{className:"flex flex-col",children:[(0,r.jsx)("span",{className:"text-[10px] font-black uppercase tracking-widest opacity-60",children:"Controller"}),(0,r.jsxs)("code",{className:"text-sm font-mono font-bold",children:[g.controller.slice(0,6),"...",g.controller.slice(-4)]})]}),"controller"===k?(0,r.jsx)(c.A,{className:"h-4 w-4 text-emerald-500 ml-2"}):(0,r.jsx)(m.A,{className:"h-4 w-4 opacity-50 ml-2 group-hover:opacity-100"})]}),(0,r.jsxs)("div",{className:"group flex items-center gap-3 border-2 border-black dark:border-white p-3 bg-muted/10 hover:bg-primary/5 transition-colors cursor-pointer",onClick:()=>T(g.wallet,"wallet"),children:[(0,r.jsx)("div",{className:"bg-primary text-primary-foreground p-1",children:(0,r.jsx)(l.A,{className:"h-4 w-4"})}),(0,r.jsxs)("div",{className:"flex flex-col",children:[(0,r.jsx)("span",{className:"text-[10px] font-black uppercase tracking-widest opacity-60",children:"Safe Vault"}),(0,r.jsxs)("code",{className:"text-sm font-mono font-bold",children:[g.wallet.slice(0,6),"...",g.wallet.slice(-4)]})]}),"wallet"===k?(0,r.jsx)(c.A,{className:"h-4 w-4 text-emerald-500 ml-2"}):(0,r.jsx)(m.A,{className:"h-4 w-4 opacity-50 ml-2 group-hover:opacity-100"})]})]})]}),(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 w-full xl:w-auto",children:[(0,r.jsxs)(h.$,{variant:"outline",onClick:()=>O(!0),className:"h-14 px-6 rounded-none border-2 border-black dark:border-white font-black uppercase italic hover:bg-black hover:text-white dark:hover:bg-white dark:hover:text-black transition-all",children:[(0,r.jsx)(x.A,{className:"h-5 w-5 mr-2"}),"Batch Op"]}),(0,r.jsxs)(h.$,{onClick:()=>S(!0),className:"h-14 px-8 rounded-none border-2 border-black dark:border-white font-black uppercase italic shadow-[4px_4px_0px_0px_rgba(0,0,0,1)] dark:shadow-[4px_4px_0px_0px_rgba(255,255,255,1)] hover:translate-x-0.5 hover:translate-y-0.5 hover:shadow-none transition-all",children:[(0,r.jsx)(u.A,{className:"h-5 w-5 mr-2"}),"New Proposal"]})]})]}),(0,r.jsx)(eB,{multisig:g})]}),(0,r.jsx)(ed,{isOpen:A,onClose:()=>S(!1),controllerAddress:g.controller,defaultTab:"transfer"}),(0,r.jsx)(eV,{isOpen:E,onClose:()=>O(!1),multisig:g})]})}},63258:(e,s,a)=>{"use strict";a.d(s,{p:()=>n});var r=a(73788);a(65936);var t=a(35993);function n({className:e,type:s,...a}){return(0,r.jsx)("input",{type:s,"data-slot":"input",className:(0,t.cn)("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",e),...a})}},79649:(e,s,a)=>{Promise.resolve().then(a.bind(a,55934))}},e=>{e.O(0,[7563,9379,5584,8121,3895,1050,1301,4210,9360,9954,1253,3698,7358],()=>e(e.s=79649)),_N_E=e.O()}]);